<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Components &#8212; documentation Connector </title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="Modèles" href="api_backend.html" />
    <link rel="prev" title="Configuring channels and the job runner" href="../guides/jobrunner.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-7628916-3', 'odoo-connector.com');
  ga('send', 'pageview');
</script>

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          Odoo Connector</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
  <li class="dropdown">
    <a role="button"
       id="dLabelTranslations"
       data-toggle="dropdown"
       data-target="#"
       href="#">Translations<b class="caret"></b></a>
    <ul class="dropdown-menu"
        role="menu"
        aria-labelledby="dLabelTranslations">
      <li><a class="reference" href="http://odoo-connector.com/10.0">English</a><li>
      <li><a class="reference" href="http://odoo-connector.com/10.0/fr">French</a><li>
    </ul>
  </li>
  <li class="dropdown">
    <a role="button"
       id="dLabelVersions"
       data-toggle="dropdown"
       data-target="#"
       href="#">Version<b class="caret"></b></a>
    <ul class="dropdown-menu"
        role="menu"
        aria-labelledby="dLabeVersions">
      <li><a class="reference" href="http://odoo-connector.com/8.0">8.0</a><li>
      <li><a class="reference" href="http://odoo-connector.com/9.0">9.0</a><li>
      <li><a class="reference" href="http://odoo-connector.com">11.0</a><li>
    </ul>
  </li>
  
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../guides/migration_guide.html">Migration Guide to the new Connector API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../guides/migration_guide.html#migrating-jobs">Migrating Jobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/migration_guide.html#migrating-events">Migrating Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/migration_guide.html#migrating-components">Migrating Components</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guides/code_overview.html">Survol du code</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../guides/code_overview.html#trigger-and-listen-an-event">Trigger and listen an event</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/code_overview.html#delay-an-asynchronous-job">Delay an Asynchronous Job</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/code_overview.html#work-with-components">Work with components</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guides/concepts.html">Concepts du connecteur</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../guides/concepts.html#events">Événements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/concepts.html#jobs-queue">Queue de jobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/concepts.html#backend">Backend</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/concepts.html#workcontext">WorkContext</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/concepts.html#component">Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/concepts.html#bindings">Bindings (Liaisons)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/concepts.html#checkpoint">Point de contrôle</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guides/bootstrap_connector.html">Amorcer la création un nouveau connecteur</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../guides/bootstrap_connector.html#odoo-manifest">Odoo Manifest</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/bootstrap_connector.html#backend-model">Modèle du backend</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/bootstrap_connector.html#abstract-binding">Binding abstrait</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/bootstrap_connector.html#components">Components</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guides/jobrunner.html">Configuring channels and the job runner</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../guides/jobrunner.html#what-is-the-job-runner">What is the job runner?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/jobrunner.html#how-does-it-work">How does it work?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/jobrunner.html#how-to-use-it">How to use it?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/jobrunner.html#caveat">Caveat</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/jobrunner.html#what-is-a-channel">What is a channel?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/jobrunner.html#how-to-configure-channels">How to configure Channels?</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Components</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-connector.components.core">Core Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-connector.components.binder">Connector Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-odoo.addons.component.models.collection">Components Collection Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-odoo.addons.component.exception">Components Exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#components-internals">Components Internals</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_backend.html">Modèles</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api_backend.html#backend-model">Backend Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_backend.html#binding-model">Binding Model</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_event.html">Events</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api_event.html#module-odoo.addons.component_event.components.event">Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_event.html#module-odoo.addons.component_event.models.base">Odoo Models Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_event.html#module-odoo.addons.component_event.core">Internals</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_queue.html">Queue</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api_queue.html#module-odoo.addons.queue_job.job">Job</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_queue.html#module-odoo.addons.queue_job.models.base">Modèles</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_exception.html">Exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_channels.html">Channels</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../project/contribute.html">Contribuer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../project/contribute.html#want-to-start-a-new-connector">Démarrer un nouveau connecteur</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/contribute.html#creating-or-maintaining-a-translation-of-this-doc">Créer ou maintenir une traduction de cette doc</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../project/contributors.html">Contributeurs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project/contributors.html#financial-contributors">Contributeurs financiers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project/license.html">Licence</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project/changes.html">Changements</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../project/changes.html#future">Future (?)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/changes.html#id2">9.0.1.0.2 (2016-03-03)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/changes.html#id3">9.0.1.0.1 (2016-03-03)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/changes.html#id4">8.0.3.3.0 (2016-02-29)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/changes.html#id5">3.2.0 (2015-09-10)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/changes.html#id6">3.1.0 (2015-05-15)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/changes.html#id7">3.0.0 (2015-04-01)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/changes.html#id8">2.2.0 (2014-05-26)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/changes.html#id9">2.1.1 (2014-02-06)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/changes.html#warning-breaks-compatibility">2.1.0 (2014-01-15 - attention : rupture de compatibilité)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/changes.html#id10">2.0.1 (2013-09-12)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/changes.html#id11">2.0.0</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../project/roadmap.html">Roadmap</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Components</a><ul>
<li><a class="reference internal" href="#module-connector.components.core">Core Components</a><ul>
<li><a class="reference internal" href="#base-component">Base Component</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-connector.components.binder">Connector Components</a><ul>
<li><a class="reference internal" href="#binders">Binders</a></li>
<li><a class="reference internal" href="#mappers">Mappeurs</a></li>
<li><a class="reference internal" href="#backend-adapter">Adaptateur de backend</a></li>
<li><a class="reference internal" href="#synchronizer">Synchroniseur</a></li>
<li><a class="reference internal" href="#listeners">Listeners</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-odoo.addons.component.models.collection">Components Collection Model</a><ul>
<li><a class="reference internal" href="#collection-model">Collection Model</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-odoo.addons.component.exception">Components Exceptions</a></li>
<li><a class="reference internal" href="#components-internals">Components Internals</a><ul>
<li><a class="reference internal" href="#core">Core</a></li>
<li><a class="reference internal" href="#components-builder">Components Builder</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            

            
              
                
  <li>
    <a href="../guides/jobrunner.html" title="Previous Chapter: Configuring channels and the job runner"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Configuring c...</span>
    </a>
  </li>
  <li>
    <a href="api_backend.html" title="Next Chapter: Modèles"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Modèles &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="components">
<span id="api-component"></span><h1>Components<a class="headerlink" href="#components" title="Lien permanent vers ce titre">¶</a></h1>
<p>Components are the blocks allowing to build a flexible and
well decoupled code. They are based on the <code class="docutils literal"><span class="pre">component</span></code> addon, which
can as well be used separately.</p>
<div class="section" id="module-connector.components.core">
<span id="core-components"></span><h2>Core Components<a class="headerlink" href="#module-connector.components.core" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="base-component">
<h3>Base Component<a class="headerlink" href="#base-component" title="Lien permanent vers ce titre">¶</a></h3>
<p>The connector proposes a “base” Component, which can be used in
the <code class="docutils literal"><span class="pre">_inherit</span></code> of your own components.  This is not a
requirement.  It is already inherited by every component
provided by the Connector.</p>
<p>Components are organized according to different usages.  The connector suggests
5 main kinds of Components. Each might have a few different usages.  You can be
as creative as you want when it comes to creating new ones though.</p>
<p>One «&nbsp;usage&nbsp;» is responsible for a specific work, and alongside with the
collection (the backend) and the model, the usage will be used to find the
needed component for a task.</p>
<p>Some of the Components have an implementation in the <code class="docutils literal"><span class="pre">Connector</span></code> addon, but
some are empty shells that need to be implemented in the different connectors.</p>
<p>The usual categories are:</p>
<dl class="docutils">
<dt><a class="reference internal" href="#connector.components.binder.Binder" title="connector.components.binder.Binder"><code class="xref py py-class docutils literal"><span class="pre">Binder</span></code></a></dt>
<dd><p class="first">The <code class="docutils literal"><span class="pre">binders</span></code> give the external ID or Odoo ID from respectively an
Odoo ID or an external ID. A default implementation is available.</p>
<p>Most common usages:</p>
<ul class="last simple">
<li><code class="docutils literal"><span class="pre">binder</span></code></li>
</ul>
</dd>
<dt><a class="reference internal" href="#connector.components.mapper.Mapper" title="connector.components.mapper.Mapper"><code class="xref py py-class docutils literal"><span class="pre">Mapper</span></code></a></dt>
<dd><p class="first">The <code class="docutils literal"><span class="pre">mappers</span></code> transform a external record into an Odoo record or
conversely.</p>
<p>Most common usages:</p>
<ul class="last simple">
<li><code class="docutils literal"><span class="pre">import.mapper</span></code></li>
<li><code class="docutils literal"><span class="pre">export.mapper</span></code></li>
</ul>
</dd>
<dt><a class="reference internal" href="#connector.components.backend_adapter.BackendAdapter" title="connector.components.backend_adapter.BackendAdapter"><code class="xref py py-class docutils literal"><span class="pre">BackendAdapter</span></code></a></dt>
<dd><p class="first">The <code class="docutils literal"><span class="pre">backend.adapters</span></code> implements the discussion with the <code class="docutils literal"><span class="pre">backend's</span></code>
APIs. They usually adapt their APIs to a common interface (CRUD).</p>
<p>Most common usages:</p>
<ul class="last simple">
<li><code class="docutils literal"><span class="pre">backend.adapter</span></code></li>
</ul>
</dd>
<dt><a class="reference internal" href="#connector.components.synchronizer.Synchronizer" title="connector.components.synchronizer.Synchronizer"><code class="xref py py-class docutils literal"><span class="pre">Synchronizer</span></code></a></dt>
<dd><p class="first">A <code class="docutils literal"><span class="pre">synchronizer</span></code> is the main piece of a synchronization.  It
orchestrates the flow of a synchronization and use the other
Components</p>
<p>Most common usages:</p>
<ul class="last simple">
<li><code class="docutils literal"><span class="pre">record.importer</span></code></li>
<li><code class="docutils literal"><span class="pre">record.exporter</span></code></li>
<li><code class="docutils literal"><span class="pre">batch.importer</span></code></li>
<li><code class="docutils literal"><span class="pre">batch.exporter</span></code></li>
</ul>
</dd>
</dl>
<dl class="class">
<dt id="connector.components.core.BaseConnectorComponent">
<em class="property">class </em><code class="descclassname">connector.components.core.</code><code class="descname">BaseConnectorComponent</code><span class="sig-paren">(</span><em>work_context</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/core.html#BaseConnectorComponent"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.core.BaseConnectorComponent" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Bases : <a class="reference internal" href="#odoo.addons.component.core.AbstractComponent" title="odoo.addons.component.core.AbstractComponent"><code class="xref py py-class docutils literal"><span class="pre">odoo.addons.component.core.AbstractComponent</span></code></a></p>
<p>Base component for the connector</p>
<p>Is inherited by every components of the Connector (Binder, Mapper, …)
and adds a few methods which are of common usage in the connectors.</p>
<dl class="attribute">
<dt id="connector.components.core.BaseConnectorComponent._name">
<code class="descname">_name</code><em class="property"> = 'base.connector'</em><a class="headerlink" href="#connector.components.core.BaseConnectorComponent._name" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.core.BaseConnectorComponent.backend_record">
<code class="descname">backend_record</code><a class="headerlink" href="#connector.components.core.BaseConnectorComponent.backend_record" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Backend record we are working with</p>
</dd></dl>

<dl class="method">
<dt id="connector.components.core.BaseConnectorComponent.binder_for">
<code class="descname">binder_for</code><span class="sig-paren">(</span><em>model=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/core.html#BaseConnectorComponent.binder_for"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.core.BaseConnectorComponent.binder_for" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Shortcut to get Binder for a model</p>
<p>Equivalent to: <code class="docutils literal"><span class="pre">self.component(usage='binder',</span> <span class="pre">model_name='xxx')</span></code></p>
</dd></dl>

<dl class="method">
<dt id="connector.components.core.BaseConnectorComponent.advisory_lock_or_retry">
<code class="descname">advisory_lock_or_retry</code><span class="sig-paren">(</span><em>lock</em>, <em>retry_seconds=1</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/core.html#BaseConnectorComponent.advisory_lock_or_retry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.core.BaseConnectorComponent.advisory_lock_or_retry" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Acquire a Postgres transactional advisory lock or retry job</p>
<p>When the lock cannot be acquired, it raises a
<code class="xref py py-exc docutils literal"><span class="pre">odoo.addons.queue_job.exception.RetryableJobError</span></code> so the job
is retried after n <code class="docutils literal"><span class="pre">retry_seconds</span></code>.</p>
<p>Usage example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">lock_name</span> <span class="o">=</span> <span class="s1">&#39;import_record({}, {}, {}, {})&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">backend_record</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">backend_record</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">external_id</span><span class="p">,</span>
<span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">advisory_lock_or_retry</span><span class="p">(</span><span class="n">lock_name</span><span class="p">,</span> <span class="n">retry_seconds</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>See <code class="xref py py-func docutils literal"><span class="pre">odoo.addons.connector.connector.pg_try_advisory_lock()</span></code> for
details.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Paramètres:</th><td class="field-body"><ul class="first last simple">
<li><strong>lock</strong> – The lock name. Can be anything convertible to a
string.  It needs to represent what should not be synchronized
concurrently, usually the string will contain at least: the
action, the backend name, the backend id, the model name, the
external id</li>
<li><strong>retry_seconds</strong> – number of seconds after which a job should
be retried when the lock cannot be acquired.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="connector.components.core.BaseConnectorComponent._module">
<code class="descname">_module</code><em class="property"> = 'connector'</em><a class="headerlink" href="#connector.components.core.BaseConnectorComponent._module" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-connector.components.binder">
<span id="connector-components"></span><h2>Connector Components<a class="headerlink" href="#module-connector.components.binder" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="binders">
<h3>Binders<a class="headerlink" href="#binders" title="Lien permanent vers ce titre">¶</a></h3>
<p>Binders are components that know how to find the external ID for an
Odoo ID, how to find the Odoo ID for an external ID and how to
create the binding between them.</p>
<dl class="class">
<dt id="connector.components.binder.Binder">
<em class="property">class </em><code class="descclassname">connector.components.binder.</code><code class="descname">Binder</code><span class="sig-paren">(</span><em>work_context</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/binder.html#Binder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.binder.Binder" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Bases : <a class="reference internal" href="#odoo.addons.component.core.AbstractComponent" title="odoo.addons.component.core.AbstractComponent"><code class="xref py py-class docutils literal"><span class="pre">odoo.addons.component.core.AbstractComponent</span></code></a></p>
<p>Pour un enregistrement d’un modèle, capable de trouver un ID externe ou interne, ou crée la liaison entre eux</p>
<p>This is a default implementation that can be inherited or reimplemented
in the connectors.</p>
<p>This implementation assumes that binding models are <code class="docutils literal"><span class="pre">_inherits</span></code> of
the models they are binding.</p>
<dl class="attribute">
<dt id="connector.components.binder.Binder._name">
<code class="descname">_name</code><em class="property"> = 'base.binder'</em><a class="headerlink" href="#connector.components.binder.Binder._name" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.binder.Binder._inherit">
<code class="descname">_inherit</code><em class="property"> = 'base.connector'</em><a class="headerlink" href="#connector.components.binder.Binder._inherit" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.binder.Binder._usage">
<code class="descname">_usage</code><em class="property"> = 'binder'</em><a class="headerlink" href="#connector.components.binder.Binder._usage" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.binder.Binder._external_field">
<code class="descname">_external_field</code><em class="property"> = 'external_id'</em><a class="headerlink" href="#connector.components.binder.Binder._external_field" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.binder.Binder._backend_field">
<code class="descname">_backend_field</code><em class="property"> = 'backend_id'</em><a class="headerlink" href="#connector.components.binder.Binder._backend_field" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.binder.Binder._odoo_field">
<code class="descname">_odoo_field</code><em class="property"> = 'odoo_id'</em><a class="headerlink" href="#connector.components.binder.Binder._odoo_field" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.binder.Binder._sync_date_field">
<code class="descname">_sync_date_field</code><em class="property"> = 'sync_date'</em><a class="headerlink" href="#connector.components.binder.Binder._sync_date_field" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="connector.components.binder.Binder.to_internal">
<code class="descname">to_internal</code><span class="sig-paren">(</span><em>external_id</em>, <em>unwrap=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/binder.html#Binder.to_internal"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.binder.Binder.to_internal" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Give the Odoo recordset for an external ID</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Paramètres:</th><td class="field-body"><ul class="first simple">
<li><strong>external_id</strong> – ID externe pour lequel on veut l’ID Odoo</li>
<li><strong>unwrap</strong> – if True, returns the normal record
else return the binding record</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Retourne:</th><td class="field-body"><p class="first">a recordset, depending on the value of unwrap,
or an empty recordset if the external_id is not mapped</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Type retourné:</th><td class="field-body"><p class="first last"><a class="reference internal" href="api_queue.html#odoo.addons.queue_job.job.Job.recordset" title="odoo.addons.queue_job.job.Job.recordset">recordset</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="connector.components.binder.Binder.to_external">
<code class="descname">to_external</code><span class="sig-paren">(</span><em>binding</em>, <em>wrap=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/binder.html#Binder.to_external"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.binder.Binder.to_external" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Give the external ID for an Odoo binding ID</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Paramètres:</th><td class="field-body"><ul class="first simple">
<li><strong>binding</strong> – Odoo binding for which we want the external id</li>
<li><strong>wrap</strong> – if True, binding is a normal record, the
method will search the corresponding binding and return
the external id of the binding</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Retourne:</th><td class="field-body"><p class="first last">ID externe de l’enregistrement</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="connector.components.binder.Binder.bind">
<code class="descname">bind</code><span class="sig-paren">(</span><em>external_id</em>, <em>binding</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/binder.html#Binder.bind"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.binder.Binder.bind" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Crée le lien entre un ID externe et un ID Odoo</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Paramètres:</th><td class="field-body"><ul class="first last simple">
<li><strong>external_id</strong> – ID externe à lier</li>
<li><strong>binding</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(disponible dans Python v2.7)"><em>int</em></a>) – Odoo record to bind</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="connector.components.binder.Binder.unwrap_binding">
<code class="descname">unwrap_binding</code><span class="sig-paren">(</span><em>binding</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/binder.html#Binder.unwrap_binding"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.binder.Binder.unwrap_binding" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Pour un enregistrement de liaison, donne l’enregistrement normal</p>
<p>Exemple : si appelé avec un ID de <code class="docutils literal"><span class="pre">magento.product.product</span></code>, il va renvoyer l’ID correspondant du <code class="docutils literal"><span class="pre">product.product</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Paramètres:</th><td class="field-body"><strong>browse</strong> – si Vrai, renvoie une instance de <cite>browse_record</cite> à la place d’un ID</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="connector.components.binder.Binder.unwrap_model">
<code class="descname">unwrap_model</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/binder.html#Binder.unwrap_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.binder.Binder.unwrap_model" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Pour un modèle de liaison, donne le modèle normal.</p>
<p>Exemple : si appelé sur une binder pour <code class="docutils literal"><span class="pre">magento.product.product</span></code>, il va renvoyer <code class="docutils literal"><span class="pre">product.product</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="connector.components.binder.Binder._module">
<code class="descname">_module</code><em class="property"> = 'connector'</em><a class="headerlink" href="#connector.components.binder.Binder._module" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<span class="target" id="module-connector.components.mapper"></span><div class="section" id="mappers">
<h3>Mappeurs<a class="headerlink" href="#mappers" title="Lien permanent vers ce titre">¶</a></h3>
<p>Mappers are the components responsible to transform
external records into Odoo records and conversely.</p>
<dl class="function">
<dt id="connector.components.mapper.mapping">
<code class="descclassname">connector.components.mapper.</code><code class="descname">mapping</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#mapping"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.mapping" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Decorator, declare that a method is a mapping method.</p>
<p>C’est ensuite utilisé par le <a class="reference internal" href="#connector.components.mapper.Mapper" title="connector.components.mapper.Mapper"><code class="xref py py-class docutils literal"><span class="pre">Mapper</span></code></a> pour convertir les enregistrements.</p>
<p>Utilisation</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@mapping</span>
<span class="k">def</span> <span class="nf">any</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;output_field&#39;</span><span class="p">:</span> <span class="n">record</span><span class="p">[</span><span class="s1">&#39;input_field&#39;</span><span class="p">]}</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="connector.components.mapper.changed_by">
<code class="descclassname">connector.components.mapper.</code><code class="descname">changed_by</code><span class="sig-paren">(</span><em>*args</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#changed_by"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.changed_by" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Décorateur pour les méthodes de mapping (<a class="reference internal" href="#connector.components.mapper.mapping" title="connector.components.mapper.mapping"><code class="xref py py-func docutils literal"><span class="pre">mapping()</span></code></a>)</p>
<p>Lorsque des champs sont modifié dans Odoo, nous ne devrions exporter que les champs modifiés. En utilisant ce décorateur, nous pouvons préciser quelles modifications de champs doivent déclencher quelle méthode de mapping.</p>
<p>Si <code class="docutils literal"><span class="pre">changed_by</span></code> est vide, le mapping est toujours actif.</p>
<p>Autant que possible, ce décorateur devrait être utilisé pour les exports. De cette façon lorsqu’on fait une modification sur une petite partie des champs d’un enregistrement, la taille de l’enregistrement en sortie sera limitée aux seuls champs devant être exportés.</p>
<p>Utilisation</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@changed_by</span><span class="p">(</span><span class="s1">&#39;input_field&#39;</span><span class="p">)</span>
<span class="nd">@mapping</span>
<span class="k">def</span> <span class="nf">any</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;output_field&#39;</span><span class="p">:</span> <span class="n">record</span><span class="p">[</span><span class="s1">&#39;input_field&#39;</span><span class="p">]}</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Paramètres:</th><td class="field-body"><strong>*args</strong> – noms de champs qui déclenchent le mapping à la modification</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="connector.components.mapper.only_create">
<code class="descclassname">connector.components.mapper.</code><code class="descname">only_create</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#only_create"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.only_create" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Décorateur pour les méthodes de mapping (<a class="reference internal" href="#connector.components.mapper.mapping" title="connector.components.mapper.mapping"><code class="xref py py-func docutils literal"><span class="pre">mapping()</span></code></a>)</p>
<p>Un mapping décoré avec <code class="docutils literal"><span class="pre">only_create</span></code> indique qu’il doit être utilisé uniquement pour a création d’enregistrements.</p>
<p>Utilisation</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@only_create</span>
<span class="nd">@mapping</span>
<span class="k">def</span> <span class="nf">any</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;output_field&#39;</span><span class="p">:</span> <span class="n">record</span><span class="p">[</span><span class="s1">&#39;input_field&#39;</span><span class="p">]}</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="connector.components.mapper.none">
<code class="descclassname">connector.components.mapper.</code><code class="descname">none</code><span class="sig-paren">(</span><em>field</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#none"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.none" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Un modificateur destiné à être utilisé sur les mapping <code class="docutils literal"><span class="pre">directs</span></code></p>
<p>Remplace les valeurs similaires à False par None. Ceci peut être utilisé dans un enchaînement de modificateurs quand .</p>
<p>Exemples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">direct</span> <span class="o">=</span> <span class="p">[(</span><span class="n">none</span><span class="p">(</span><span class="s1">&#39;source&#39;</span><span class="p">),</span> <span class="s1">&#39;target&#39;</span><span class="p">),</span>
          <span class="p">(</span><span class="n">none</span><span class="p">(</span><span class="n">m2o_to_external</span><span class="p">(</span><span class="s1">&#39;rel_id&#39;</span><span class="p">),</span> <span class="s1">&#39;rel_id&#39;</span><span class="p">)]</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Paramètres:</th><td class="field-body"><ul class="first last simple">
<li><strong>field</strong> – nom du champ source dans l’enregistrement</li>
<li><strong>binding</strong> – True si la relation est un enregistrement de binding</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="connector.components.mapper.convert">
<code class="descclassname">connector.components.mapper.</code><code class="descname">convert</code><span class="sig-paren">(</span><em>field</em>, <em>conv_type</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#convert"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.convert" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Un modificateur destiné à être utilisé sur les mapping <code class="docutils literal"><span class="pre">directs</span></code></p>
<p>Convertit une valeur de champ vers un type donné</p>
<p>Exemples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">direct</span> <span class="o">=</span> <span class="p">[(</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;source&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span> <span class="s1">&#39;target&#39;</span><span class="p">)]</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Paramètres:</th><td class="field-body"><ul class="first last simple">
<li><strong>field</strong> – nom du champ source dans l’enregistrement</li>
<li><strong>binding</strong> – True si la relation est un enregistrement de binding</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="connector.components.mapper.m2o_to_external">
<code class="descclassname">connector.components.mapper.</code><code class="descname">m2o_to_external</code><span class="sig-paren">(</span><em>field</em>, <em>binding=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#m2o_to_external"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.m2o_to_external" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Un modificateur destiné à être utilisé sur les mapping <code class="docutils literal"><span class="pre">directs</span></code></p>
<p>For a many2one, get the external ID and returns it.</p>
<p>Quand la relation du champ n’est pas un binding (càd ne pointe pas vers quelque chose comme <code class="docutils literal"><span class="pre">magento.*</span></code>), le modèle de liaison doit être fourni avec l’argument nommé <code class="docutils literal"><span class="pre">binding</span></code>.</p>
<p>Exemples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">direct</span> <span class="o">=</span> <span class="p">[(</span><span class="n">m2o_to_external</span><span class="p">(</span><span class="s1">&#39;country_id&#39;</span><span class="p">,</span>
                           <span class="n">binding</span><span class="o">=</span><span class="s1">&#39;magento.res.country&#39;</span><span class="p">),</span> <span class="s1">&#39;country&#39;</span><span class="p">),</span>
          <span class="p">(</span><span class="n">m2o_to_external</span><span class="p">(</span><span class="s1">&#39;magento_country_id&#39;</span><span class="p">),</span> <span class="s1">&#39;country&#39;</span><span class="p">)]</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Paramètres:</th><td class="field-body"><ul class="first last simple">
<li><strong>field</strong> – nom du champ source dans l’enregistrement</li>
<li><strong>binding</strong> – nom du modèle de liaison si la relation n’est pas une liaison</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="connector.components.mapper.external_to_m2o">
<code class="descclassname">connector.components.mapper.</code><code class="descname">external_to_m2o</code><span class="sig-paren">(</span><em>field</em>, <em>binding=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#external_to_m2o"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.external_to_m2o" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Un modificateur destiné à être utilisé sur les mapping <code class="docutils literal"><span class="pre">directs</span></code></p>
<p>For a field from a backend which is an ID, search the corresponding
binding in Odoo and returns it.</p>
<p>Quand la relation du champ n’est pas un binding (càd ne pointe pas vers quelque chose comme <code class="docutils literal"><span class="pre">magento.*</span></code>), le modèle de liaison doit être fourni avec l’argument nommé <code class="docutils literal"><span class="pre">binding</span></code>.</p>
<p>Exemples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">direct</span> <span class="o">=</span> <span class="p">[(</span><span class="n">external_to_m2o</span><span class="p">(</span><span class="s1">&#39;country&#39;</span><span class="p">,</span> <span class="n">binding</span><span class="o">=</span><span class="s1">&#39;magento.res.country&#39;</span><span class="p">),</span>
           <span class="s1">&#39;country_id&#39;</span><span class="p">),</span>
          <span class="p">(</span><span class="n">external_to_m2o</span><span class="p">(</span><span class="s1">&#39;country&#39;</span><span class="p">),</span> <span class="s1">&#39;magento_country_id&#39;</span><span class="p">)]</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Paramètres:</th><td class="field-body"><ul class="first last simple">
<li><strong>field</strong> – nom du champ source dans l’enregistrement</li>
<li><strong>binding</strong> – nom du modèle de liaison si la relation n’est pas une liaison</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="connector.components.mapper.follow_m2o_relations">
<code class="descclassname">connector.components.mapper.</code><code class="descname">follow_m2o_relations</code><span class="sig-paren">(</span><em>field</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#follow_m2o_relations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.follow_m2o_relations" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>A modifier intended to be used on <code class="docutils literal"><span class="pre">direct</span></code> mappings.</p>
<p>“Follows” Many2one relations and return the final field value.</p>
<dl class="docutils">
<dt>Exemples :</dt>
<dd><p class="first">Assuming model is <code class="docutils literal"><span class="pre">product.product</span></code>:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="n">direct</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="n">follow_m2o_relations</span><span class="p">(</span><span class="s1">&#39;product_tmpl_id.categ_id.name&#39;</span><span class="p">),</span> <span class="s1">&#39;cat&#39;</span><span class="p">)]</span>
</pre></div>
</div>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Paramètres:</th><td class="field-body"><strong>field</strong> – field «&nbsp;path&nbsp;», using dots for relations as usual in Odoo</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="connector.components.mapper.MappingDefinition">
<em class="property">class </em><code class="descclassname">connector.components.mapper.</code><code class="descname">MappingDefinition</code><span class="sig-paren">(</span><em>changed_by</em>, <em>only_create</em><span class="sig-paren">)</span><a class="headerlink" href="#connector.components.mapper.MappingDefinition" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Bases : <code class="xref py py-class docutils literal"><span class="pre">tuple</span></code></p>
<dl class="method">
<dt id="connector.components.mapper.MappingDefinition._asdict">
<code class="descname">_asdict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#connector.components.mapper.MappingDefinition._asdict" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Return a new OrderedDict which maps field names to their values</p>
</dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.MappingDefinition._fields">
<code class="descname">_fields</code><em class="property"> = ('changed_by', 'only_create')</em><a class="headerlink" href="#connector.components.mapper.MappingDefinition._fields" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="connector.components.mapper.MappingDefinition._make">
<em class="property">classmethod </em><code class="descname">_make</code><span class="sig-paren">(</span><em>iterable</em>, <em>new=&lt;built-in method __new__ of type object at 0x8feda0&gt;</em>, <em>len=&lt;built-in function len&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#connector.components.mapper.MappingDefinition._make" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Make a new MappingDefinition object from a sequence or iterable</p>
</dd></dl>

<dl class="method">
<dt id="connector.components.mapper.MappingDefinition._replace">
<code class="descname">_replace</code><span class="sig-paren">(</span><em>_self</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="headerlink" href="#connector.components.mapper.MappingDefinition._replace" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Return a new MappingDefinition object replacing specified fields with new values</p>
</dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.MappingDefinition.changed_by">
<code class="descname">changed_by</code><a class="headerlink" href="#connector.components.mapper.MappingDefinition.changed_by" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Alias pour le champ numéro 0</p>
</dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.MappingDefinition.only_create">
<code class="descname">only_create</code><a class="headerlink" href="#connector.components.mapper.MappingDefinition.only_create" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Alias pour le champs numéro 1</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="connector.components.mapper.MapChild">
<em class="property">class </em><code class="descclassname">connector.components.mapper.</code><code class="descname">MapChild</code><span class="sig-paren">(</span><em>work_context</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#MapChild"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.MapChild" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Bases : <a class="reference internal" href="#odoo.addons.component.core.AbstractComponent" title="odoo.addons.component.core.AbstractComponent"><code class="xref py py-class docutils literal"><span class="pre">odoo.addons.component.core.AbstractComponent</span></code></a></p>
<p>MapChild est responsable de la conversion des items.</p>
<p>Les items sont des sous-enregistrements d’un enregistrement principal. Dans cet exemple, les items sont les enregistrements qui sont dans <code class="docutils literal"><span class="pre">lines</span></code></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sales</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;SO10&#39;</span><span class="p">,</span>
         <span class="s1">&#39;lines&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;product_id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;quantity&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span>
                   <span class="p">{</span><span class="s1">&#39;product_id&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;quantity&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}]}</span>
</pre></div>
</div>
<p>Un MapChild est toujours appelé depuis un autre <a class="reference internal" href="#connector.components.mapper.Mapper" title="connector.components.mapper.Mapper"><code class="xref py py-class docutils literal"><span class="pre">Mapper</span></code></a> qui fournit une configuration <code class="docutils literal"><span class="pre">children</span></code>.</p>
<p>Compte tenu de l’exemple ci-dessus, le <a class="reference internal" href="#connector.components.mapper.Mapper" title="connector.components.mapper.Mapper"><code class="xref py py-class docutils literal"><span class="pre">Mapper</span></code></a> « principal » renverrait quelque chose comme ça</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;SO10&#39;</span><span class="p">,</span>
         <span class="s1">&#39;lines&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;product_id&#39;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s1">&#39;quantity&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}),</span>
                   <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;product_id&#39;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span> <span class="s1">&#39;quantity&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})]}</span>
</pre></div>
</div>
<p>Un MapChild est responsable de :</p>
<ul class="simple">
<li>Trouver le <a class="reference internal" href="#connector.components.mapper.Mapper" title="connector.components.mapper.Mapper"><code class="xref py py-class docutils literal"><span class="pre">Mapper</span></code></a> pour convertir les items</li>
<li>Éventuellement exclure certaines lignes (en surchargeant <a class="reference internal" href="#connector.components.mapper.MapChild.skip_item" title="connector.components.mapper.MapChild.skip_item"><code class="xref py py-meth docutils literal"><span class="pre">skip_item()</span></code></a>)</li>
<li>Convertir les enregistrements des items en utilisant le <a class="reference internal" href="#connector.components.mapper.Mapper" title="connector.components.mapper.Mapper"><code class="xref py py-class docutils literal"><span class="pre">Mapper</span></code></a> trouvé</li>
<li>Formater les valeurs de sortie vers le format attendu par Odoo ou par le backend (comme vu ci-dessus avec <code class="docutils literal"><span class="pre">(0,</span> <span class="pre">0,</span> <span class="pre">{values})</span></code></li>
</ul>
<p>A MapChild can be extended like any other
<code class="xref py py-class docutils literal"><span class="pre">Component</span></code>.
However, it is not mandatory to explicitly create a MapChild for
each children mapping, the default one will be used
(<a class="reference internal" href="#connector.components.mapper.ImportMapChild" title="connector.components.mapper.ImportMapChild"><code class="xref py py-class docutils literal"><span class="pre">ImportMapChild</span></code></a> or <a class="reference internal" href="#connector.components.mapper.ExportMapChild" title="connector.components.mapper.ExportMapChild"><code class="xref py py-class docutils literal"><span class="pre">ExportMapChild</span></code></a>).</p>
<p>L’implémentation par défaut ne gère pas les mises à jour : si j’importe une commande deux fois, les lignes seront dupliquées. Ceci n’est pas un problème à condition qu’un import ne prenne en charge que la création  (typique pour les commandes). Il peut être implémenté au cas par cas en héritant de <a class="reference internal" href="#connector.components.mapper.MapChild.get_item_values" title="connector.components.mapper.MapChild.get_item_values"><code class="xref py py-meth docutils literal"><span class="pre">get_item_values()</span></code></a> et <a class="reference internal" href="#connector.components.mapper.MapChild.format_items" title="connector.components.mapper.MapChild.format_items"><code class="xref py py-meth docutils literal"><span class="pre">format_items()</span></code></a>.</p>
<dl class="attribute">
<dt id="connector.components.mapper.MapChild._name">
<code class="descname">_name</code><em class="property"> = 'base.map.child'</em><a class="headerlink" href="#connector.components.mapper.MapChild._name" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.MapChild._inherit">
<code class="descname">_inherit</code><em class="property"> = 'base.connector'</em><a class="headerlink" href="#connector.components.mapper.MapChild._inherit" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="connector.components.mapper.MapChild._child_mapper">
<code class="descname">_child_mapper</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#MapChild._child_mapper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.MapChild._child_mapper" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="connector.components.mapper.MapChild.skip_item">
<code class="descname">skip_item</code><span class="sig-paren">(</span><em>map_record</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#MapChild.skip_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.MapChild.skip_item" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Point d’accroche à implémenter dans les sous-classes lorsque certains enregistrements enfants doivent être sautés.</p>
<p>L’enregistrement parent est accessible dans <code class="docutils literal"><span class="pre">map_record</span></code>. S’il renvoie True, l’enregistrement enfant en cours est sauté.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Paramètres:</th><td class="field-body"><strong>map_record</strong> (<a class="reference internal" href="#connector.components.mapper.MapRecord" title="connector.components.mapper.MapRecord"><code class="xref py py-class docutils literal"><span class="pre">MapRecord</span></code></a>) – enregistrement que nous sommes en train de convertir</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="connector.components.mapper.MapChild.get_items">
<code class="descname">get_items</code><span class="sig-paren">(</span><em>items</em>, <em>parent</em>, <em>to_attr</em>, <em>options</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#MapChild.get_items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.MapChild.get_items" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Renvoie la sortie formatée des valeurs des items pour un enregistrement principal</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Paramètres:</th><td class="field-body"><ul class="first simple">
<li><strong>items</strong> (<em>list</em>) – liste d’enregistrements d’items</li>
<li><strong>parent</strong> – enregistrement parent</li>
<li><strong>to_attr</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(disponible dans Python v2.7)"><em>str</em></a>) – champ destination (peut être utilisé pour inspecter la relation)</li>
<li><strong>options</strong> – dictionnaire des options, hérité du mappeur principal</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Retourne:</th><td class="field-body"><p class="first last">valeurs de sortie formatées pour l’item</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="connector.components.mapper.MapChild.get_item_values">
<code class="descname">get_item_values</code><span class="sig-paren">(</span><em>map_record</em>, <em>to_attr</em>, <em>options</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#MapChild.get_item_values"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.MapChild.get_item_values" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Récupère la valeur brute des Mappeurs enfants depuis les items.</p>
<p>I peut être surchargé par exemple pour :</p>
<ul class="simple">
<li>Changer des options</li>
<li>Utiliser un <code class="xref py py-class docutils literal"><span class="pre">Binder</span></code> pour savoir si un item existe déjà afin de le modifier au lieu de l’ajouter</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Paramètres:</th><td class="field-body"><ul class="first last simple">
<li><strong>map_record</strong> (<a class="reference internal" href="#connector.components.mapper.MapRecord" title="connector.components.mapper.MapRecord"><code class="xref py py-class docutils literal"><span class="pre">MapRecord</span></code></a>) – enregistrement que nous sommes en train de convertir</li>
<li><strong>to_attr</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(disponible dans Python v2.7)"><em>str</em></a>) – champ destination (peut être utilisé pour inspecter la relation)</li>
<li><strong>options</strong> – dictionnaire des options, hérité du mappeur principal</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="connector.components.mapper.MapChild.format_items">
<code class="descname">format_items</code><span class="sig-paren">(</span><em>items_values</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#MapChild.format_items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.MapChild.format_items" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Formate les valeurs des items mappés depuis les Mappeurs enfants.</p>
<p>Il peut être surchargé par exemple pour ajouter les commandes de relation d’Odoo <code class="docutils literal"><span class="pre">(6,</span> <span class="pre">0,</span> <span class="pre">[IDs])</span></code>, …</p>
<p>Par exemple, il peut être modifié pour pour gérer la mise à jour d’items existants : vérifier si un “id” a bien été défini par <a class="reference internal" href="#connector.components.mapper.MapChild.get_item_values" title="connector.components.mapper.MapChild.get_item_values"><code class="xref py py-meth docutils literal"><span class="pre">get_item_values()</span></code></a> puis utilise la commande <code class="docutils literal"><span class="pre">(1,</span> <span class="pre">ID,</span> <span class="pre">{valeurs}</span></code>)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Paramètres:</th><td class="field-body"><strong>items_values</strong> (<em>list</em>) – valeurs traduites pour les items</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.MapChild._module">
<code class="descname">_module</code><em class="property"> = 'connector'</em><a class="headerlink" href="#connector.components.mapper.MapChild._module" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="connector.components.mapper.ImportMapChild">
<em class="property">class </em><code class="descclassname">connector.components.mapper.</code><code class="descname">ImportMapChild</code><span class="sig-paren">(</span><em>work_context</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#ImportMapChild"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.ImportMapChild" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Bases : <a class="reference internal" href="#odoo.addons.component.core.AbstractComponent" title="odoo.addons.component.core.AbstractComponent"><code class="xref py py-class docutils literal"><span class="pre">odoo.addons.component.core.AbstractComponent</span></code></a></p>
<p><a class="reference internal" href="#connector.components.mapper.MapChild" title="connector.components.mapper.MapChild"><code class="xref py py-class docutils literal"><span class="pre">MapChild</span></code></a> pour les imports</p>
<dl class="attribute">
<dt id="connector.components.mapper.ImportMapChild._name">
<code class="descname">_name</code><em class="property"> = 'base.map.child.import'</em><a class="headerlink" href="#connector.components.mapper.ImportMapChild._name" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.ImportMapChild._inherit">
<code class="descname">_inherit</code><em class="property"> = 'base.map.child'</em><a class="headerlink" href="#connector.components.mapper.ImportMapChild._inherit" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.ImportMapChild._usage">
<code class="descname">_usage</code><em class="property"> = 'import.map.child'</em><a class="headerlink" href="#connector.components.mapper.ImportMapChild._usage" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="connector.components.mapper.ImportMapChild._child_mapper">
<code class="descname">_child_mapper</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#ImportMapChild._child_mapper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.ImportMapChild._child_mapper" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="connector.components.mapper.ImportMapChild.format_items">
<code class="descname">format_items</code><span class="sig-paren">(</span><em>items_values</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#ImportMapChild.format_items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.ImportMapChild.format_items" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Formate les valeurs des items mappés depuis les Mappeurs enfants.</p>
<p>Il peut être surchargé par exemple pour ajouter les commandes de relation d’Odoo <code class="docutils literal"><span class="pre">(6,</span> <span class="pre">0,</span> <span class="pre">[IDs])</span></code>, …</p>
<p>Par exemple, il peut être modifié pour pour gérer la mise à jour d’items existants : vérifier si un “id” a bien été défini par <code class="xref py py-meth docutils literal"><span class="pre">get_item_values()</span></code> puis utilise la commande <code class="docutils literal"><span class="pre">(1,</span> <span class="pre">ID,</span> <span class="pre">{valeurs}</span></code>)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Paramètres:</th><td class="field-body"><strong>items_values</strong> (<em>list</em>) – liste des valeurs pour les items à créer</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.ImportMapChild._module">
<code class="descname">_module</code><em class="property"> = 'connector'</em><a class="headerlink" href="#connector.components.mapper.ImportMapChild._module" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="connector.components.mapper.ExportMapChild">
<em class="property">class </em><code class="descclassname">connector.components.mapper.</code><code class="descname">ExportMapChild</code><span class="sig-paren">(</span><em>work_context</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#ExportMapChild"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.ExportMapChild" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Bases : <a class="reference internal" href="#odoo.addons.component.core.AbstractComponent" title="odoo.addons.component.core.AbstractComponent"><code class="xref py py-class docutils literal"><span class="pre">odoo.addons.component.core.AbstractComponent</span></code></a></p>
<p><a class="reference internal" href="#connector.components.mapper.MapChild" title="connector.components.mapper.MapChild"><code class="xref py py-class docutils literal"><span class="pre">MapChild</span></code></a> pour les exports</p>
<dl class="attribute">
<dt id="connector.components.mapper.ExportMapChild._name">
<code class="descname">_name</code><em class="property"> = 'base.map.child.export'</em><a class="headerlink" href="#connector.components.mapper.ExportMapChild._name" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.ExportMapChild._inherit">
<code class="descname">_inherit</code><em class="property"> = 'base.map.child'</em><a class="headerlink" href="#connector.components.mapper.ExportMapChild._inherit" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.ExportMapChild._usage">
<code class="descname">_usage</code><em class="property"> = 'export.map.child'</em><a class="headerlink" href="#connector.components.mapper.ExportMapChild._usage" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="connector.components.mapper.ExportMapChild._child_mapper">
<code class="descname">_child_mapper</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#ExportMapChild._child_mapper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.ExportMapChild._child_mapper" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.ExportMapChild._module">
<code class="descname">_module</code><em class="property"> = 'connector'</em><a class="headerlink" href="#connector.components.mapper.ExportMapChild._module" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="connector.components.mapper.Mapper">
<em class="property">class </em><code class="descclassname">connector.components.mapper.</code><code class="descname">Mapper</code><span class="sig-paren">(</span><em>work</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#Mapper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.Mapper" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Bases : <a class="reference internal" href="#odoo.addons.component.core.AbstractComponent" title="odoo.addons.component.core.AbstractComponent"><code class="xref py py-class docutils literal"><span class="pre">odoo.addons.component.core.AbstractComponent</span></code></a></p>
<p>Un Mappeur convertit un enregistrement externe en enregistrement Odoo et vice versa. La sortie d’un Traducteur est un <code class="docutils literal"><span class="pre">dict</span></code>.</p>
<p>3 types de mappings sont pris en charge :</p>
<dl class="docutils">
<dt>Mappings directs</dt>
<dd><p class="first">Exemples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">direct</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;source&#39;</span><span class="p">,</span> <span class="s1">&#39;target&#39;</span><span class="p">)]</span>
</pre></div>
</div>
<p>Ici le champs <code class="docutils literal"><span class="pre">source</span></code> sera copié vers le champ <code class="docutils literal"><span class="pre">target</span></code>.</p>
<p>Un modificateur peut être utilisé dans l’item source. Le modificateur sera appliqué au champ source avant d’être copié dans le champ destination. Il doit être une fonction de type <cite>closure</cite> pour respecter cet idiome</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">a_function</span><span class="p">(</span><span class="n">field</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; ``field`` is the name of the source field.</span>

<span class="sd">        Naming the arg: ``field`` is required for the conversion&#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">modifier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">,</span> <span class="n">to_attr</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; self is the current Mapper,</span>
<span class="sd">            record is the current record to map,</span>
<span class="sd">            to_attr is the target field&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="n">record</span><span class="p">[</span><span class="n">field</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">modifier</span>
</pre></div>
</div>
<p>Et utilisé de cette façon</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">direct</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">a_function</span><span class="p">(</span><span class="s1">&#39;source&#39;</span><span class="p">),</span> <span class="s1">&#39;target&#39;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Un exemple plus concret de modificateur</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">conv_type</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; Convert the source field to a defined ``conv_type``</span>
<span class="sd">    (ex. str) before returning it&#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">modifier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">,</span> <span class="n">to_attr</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="n">field</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">conv_type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">modifier</span>
</pre></div>
</div>
<p>Et utilisé de cette façon</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">direct</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;myfield&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;target_field&#39;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<p>D’autres exemples de modificateurs</p>
<ul class="last simple">
<li><a class="reference internal" href="#connector.components.mapper.convert" title="connector.components.mapper.convert"><code class="xref py py-func docutils literal"><span class="pre">convert()</span></code></a></li>
<li><a class="reference internal" href="#connector.components.mapper.m2o_to_external" title="connector.components.mapper.m2o_to_external"><code class="xref py py-func docutils literal"><span class="pre">m2o_to_external()</span></code></a></li>
<li><a class="reference internal" href="#connector.components.mapper.external_to_m2o" title="connector.components.mapper.external_to_m2o"><code class="xref py py-func docutils literal"><span class="pre">external_to_m2o()</span></code></a></li>
</ul>
</dd>
<dt>Mappings par méthode</dt>
<dd><p class="first">Un méthode de mapping permet d’exécuter un code arbitraire et de renvoyer un ou plusieurs champs</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@mapping</span>
<span class="k">def</span> <span class="nf">compute_state</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
    <span class="c1"># compute some state, using the ``record`` or not</span>
    <span class="n">state</span> <span class="o">=</span> <span class="s1">&#39;pending&#39;</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="n">state</span><span class="p">}</span>
</pre></div>
</div>
<p>Nous pouvons aussi préciser qu’une méthode de mapping doit être appliquée lorsqu’un objet est créé, mais jamais appliquée sur les mises à jour ultérieures</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="nd">@only_create</span>
<span class="nd">@mapping</span>
<span class="k">def</span> <span class="nf">default_warehouse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
    <span class="c1"># get default warehouse</span>
    <span class="n">warehouse_id</span> <span class="o">=</span> <span class="o">...</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;warehouse_id&#39;</span><span class="p">:</span> <span class="n">warehouse_id</span><span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>Sous-mappings</dt>
<dd><p class="first">Lorsqu’un enregistrement contient des sous-items, comme les lignes d’une commande, nous pouvons convertir les enfants grâce à une autre Mappeur</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">children</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;items&#39;</span><span class="p">,</span> <span class="s1">&#39;line_ids&#39;</span><span class="p">,</span> <span class="s1">&#39;model.name&#39;</span><span class="p">)]</span>
</pre></div>
</div>
<p>Il permet de créer des commandes et toutes ses lignes dans le même appel à <code class="xref py py-meth docutils literal"><span class="pre">odoo.models.BaseModel.create()</span></code>.</p>
<p class="last">En utilisant des <code class="docutils literal"><span class="pre">children</span></code> pour les items d’un enregistrement, nous devons créer un <a class="reference internal" href="#connector.components.mapper.Mapper" title="connector.components.mapper.Mapper"><code class="xref py py-class docutils literal"><span class="pre">Mapper</span></code></a> pour le modèle des items, et de manière optionnelle un <a class="reference internal" href="#connector.components.mapper.MapChild" title="connector.components.mapper.MapChild"><code class="xref py py-class docutils literal"><span class="pre">MapChild</span></code></a>.</p>
</dd>
</dl>
<p>Utilisation d’un Mappeur</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mapper</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="p">(</span><span class="n">usage</span><span class="o">=</span><span class="s1">&#39;mapper&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">map_record</span> <span class="o">=</span> <span class="n">mapper</span><span class="o">.</span><span class="n">map_record</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">values</span> <span class="o">=</span> <span class="n">map_record</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">values</span> <span class="o">=</span> <span class="n">map_record</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">only_create</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">values</span> <span class="o">=</span> <span class="n">map_record</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;street&#39;</span><span class="p">])</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="connector.components.mapper.Mapper._name">
<code class="descname">_name</code><em class="property"> = 'base.mapper'</em><a class="headerlink" href="#connector.components.mapper.Mapper._name" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.Mapper._inherit">
<code class="descname">_inherit</code><em class="property"> = 'base.connector'</em><a class="headerlink" href="#connector.components.mapper.Mapper._inherit" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.Mapper._usage">
<code class="descname">_usage</code><em class="property"> = 'mapper'</em><a class="headerlink" href="#connector.components.mapper.Mapper._usage" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.Mapper.direct">
<code class="descname">direct</code><em class="property"> = []</em><a class="headerlink" href="#connector.components.mapper.Mapper.direct" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.Mapper.children">
<code class="descname">children</code><em class="property"> = []</em><a class="headerlink" href="#connector.components.mapper.Mapper.children" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.Mapper._map_methods">
<code class="descname">_map_methods</code><em class="property"> = None</em><a class="headerlink" href="#connector.components.mapper.Mapper._map_methods" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.Mapper._map_child_usage">
<code class="descname">_map_child_usage</code><em class="property"> = None</em><a class="headerlink" href="#connector.components.mapper.Mapper._map_child_usage" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.Mapper._map_child_fallback">
<code class="descname">_map_child_fallback</code><em class="property"> = None</em><a class="headerlink" href="#connector.components.mapper.Mapper._map_child_fallback" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="connector.components.mapper.Mapper._build_mapper_component">
<em class="property">classmethod </em><code class="descname">_build_mapper_component</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#Mapper._build_mapper_component"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.Mapper._build_mapper_component" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Build a Mapper component</p>
<p>When a Mapper component is built, we will look into every of its bases
and look for methods decorated by <code class="docutils literal"><span class="pre">&#64;mapping</span></code> or <code class="docutils literal"><span class="pre">&#64;changed_by</span></code>.  We
keep the definitions in a <code class="docutils literal"><span class="pre">_map_methods</span></code> attribute for later use by
the Mapper instances.</p>
<p>The <code class="docutils literal"><span class="pre">__bases__</span></code> of a newly generated Component are of 2 kinds:</p>
<ul class="simple">
<li>other dynamically generated components (below “base” and
“second.mapper”)</li>
<li>«&nbsp;real&nbsp;» Python classes applied on top of existing components (here
ThirdMapper)</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="bp">cls</span><span class="o">.</span><span class="vm">__bases__</span>
<span class="go">(&lt;class &#39;odoo.addons.connector.tests.test_mapper.ThirdMapper&#39;&gt;,</span>
<span class="go"> &lt;class &#39;odoo.addons.component.core.second.mapper&#39;&gt;,</span>
<span class="go"> &lt;class &#39;odoo.addons.component.core.base&#39;&gt;)</span>
</pre></div>
</div>
<p>This method traverses these bases, from the bottom to the top, and
merges the mapping definitions. It reuses the computed definitions
for the generated components (for which this code already ran), and
inspect the real classes to find mapping methods.</p>
</dd></dl>

<dl class="classmethod">
<dt id="connector.components.mapper.Mapper._complete_component_build">
<em class="property">classmethod </em><code class="descname">_complete_component_build</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#Mapper._complete_component_build"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.Mapper._complete_component_build" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="connector.components.mapper.Mapper._map_direct">
<code class="descname">_map_direct</code><span class="sig-paren">(</span><em>record</em>, <em>from_attr</em>, <em>to_attr</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#Mapper._map_direct"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.Mapper._map_direct" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Apply the <code class="docutils literal"><span class="pre">direct</span></code> mappings.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Paramètres:</th><td class="field-body"><ul class="first last simple">
<li><strong>record</strong> – record to convert from a source to a target</li>
<li><strong>from_attr</strong> (<em>callable | str</em>) – name of the source attribute or a callable</li>
<li><strong>to_attr</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(disponible dans Python v2.7)"><em>str</em></a>) – name of the target attribute</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="connector.components.mapper.Mapper._map_children">
<code class="descname">_map_children</code><span class="sig-paren">(</span><em>record</em>, <em>attr</em>, <em>model</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#Mapper._map_children"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.Mapper._map_children" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.Mapper.map_methods">
<code class="descname">map_methods</code><a class="headerlink" href="#connector.components.mapper.Mapper.map_methods" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Émets toutes les méthodes décorées avec <code class="docutils literal"><span class="pre">&#64;mapping</span></code></p>
</dd></dl>

<dl class="method">
<dt id="connector.components.mapper.Mapper._get_map_child_component">
<code class="descname">_get_map_child_component</code><span class="sig-paren">(</span><em>model_name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#Mapper._get_map_child_component"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.Mapper._get_map_child_component" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="connector.components.mapper.Mapper._map_child">
<code class="descname">_map_child</code><span class="sig-paren">(</span><em>map_record</em>, <em>from_attr</em>, <em>to_attr</em>, <em>model_name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#Mapper._map_child"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.Mapper._map_child" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Convert items of the record as defined by children</p>
</dd></dl>

<dl class="method">
<dt id="connector.components.mapper.Mapper._mapping_options">
<code class="descname">_mapping_options</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#Mapper._mapping_options"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.Mapper._mapping_options" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Change the mapping options for the Mapper.</p>
<p>Context Manager to use in order to alter the behavior
of the mapping, when using <code class="docutils literal"><span class="pre">_apply</span></code> or <code class="docutils literal"><span class="pre">finalize</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.Mapper.options">
<code class="descname">options</code><a class="headerlink" href="#connector.components.mapper.Mapper.options" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Des options peuvent être accédées dans les méthodes de mapping avec <code class="docutils literal"><span class="pre">self.options</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="connector.components.mapper.Mapper.changed_by_fields">
<code class="descname">changed_by_fields</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#Mapper.changed_by_fields"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.Mapper.changed_by_fields" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Build a set of fields used by the mapper</p>
<p>It takes in account the <code class="docutils literal"><span class="pre">direct</span></code> fields and the fields used by
the decorator: <code class="docutils literal"><span class="pre">changed_by</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="connector.components.mapper.Mapper._direct_source_field_name">
<code class="descname">_direct_source_field_name</code><span class="sig-paren">(</span><em>direct_entry</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#Mapper._direct_source_field_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.Mapper._direct_source_field_name" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Get the mapping field name. Goes through the function modifiers.</p>
<p>Ex:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[(</span><span class="n">none</span><span class="p">(</span><span class="n">convert</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">)),</span> <span class="n">out_field_name</span><span class="p">)]</span>
</pre></div>
</div>
<p>It assumes that the modifier has <code class="docutils literal"><span class="pre">field</span></code> as first argument like:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">modifier</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="connector.components.mapper.Mapper.map_record">
<code class="descname">map_record</code><span class="sig-paren">(</span><em>record</em>, <em>parent=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#Mapper.map_record"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.Mapper.map_record" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Récupère un <a class="reference internal" href="#connector.components.mapper.MapRecord" title="connector.components.mapper.MapRecord"><code class="xref py py-class docutils literal"><span class="pre">MapRecord</span></code></a> avec enregistrement, prêt à être converti avec le Mappeur en cours.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Paramètres:</th><td class="field-body"><ul class="first last simple">
<li><strong>record</strong> – enregistrement à transformer</li>
<li><strong>parent</strong> – enregistrement parent optionnel, pour les items</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="connector.components.mapper.Mapper._apply">
<code class="descname">_apply</code><span class="sig-paren">(</span><em>map_record</em>, <em>options=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#Mapper._apply"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.Mapper._apply" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Apply the mappings on a <a class="reference internal" href="#connector.components.mapper.MapRecord" title="connector.components.mapper.MapRecord"><code class="xref py py-class docutils literal"><span class="pre">MapRecord</span></code></a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Paramètres:</th><td class="field-body"><strong>map_record</strong> (<a class="reference internal" href="#connector.components.mapper.MapRecord" title="connector.components.mapper.MapRecord"><code class="xref py py-class docutils literal"><span class="pre">MapRecord</span></code></a>) – source record to convert</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="connector.components.mapper.Mapper._apply_with_options">
<code class="descname">_apply_with_options</code><span class="sig-paren">(</span><em>map_record</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#Mapper._apply_with_options"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.Mapper._apply_with_options" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Apply the mappings on a <a class="reference internal" href="#connector.components.mapper.MapRecord" title="connector.components.mapper.MapRecord"><code class="xref py py-class docutils literal"><span class="pre">MapRecord</span></code></a> with
contextual options (the <code class="docutils literal"><span class="pre">options</span></code> given in
<a class="reference internal" href="#connector.components.mapper.MapRecord.values" title="connector.components.mapper.MapRecord.values"><code class="xref py py-meth docutils literal"><span class="pre">MapRecord.values()</span></code></a> are accessible in
<code class="docutils literal"><span class="pre">self.options</span></code>)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Paramètres:</th><td class="field-body"><strong>map_record</strong> (<a class="reference internal" href="#connector.components.mapper.MapRecord" title="connector.components.mapper.MapRecord"><code class="xref py py-class docutils literal"><span class="pre">MapRecord</span></code></a>) – source record to convert</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="connector.components.mapper.Mapper.finalize">
<code class="descname">finalize</code><span class="sig-paren">(</span><em>map_record</em>, <em>values</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#Mapper.finalize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.Mapper.finalize" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Appelé à la fin du mapping.</p>
<p>Can be used to modify the values generated by all the mappings before
returning them.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Paramètres:</th><td class="field-body"><ul class="first simple">
<li><strong>map_record</strong> (<a class="reference internal" href="#connector.components.mapper.MapRecord" title="connector.components.mapper.MapRecord"><code class="xref py py-class docutils literal"><span class="pre">MapRecord</span></code></a>) – map_record source</li>
<li><strong>values</strong> – valeurs mappées</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Retourne:</th><td class="field-body"><p class="first">valeurs mappées</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Type retourné:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/2/library/stdtypes.html#dict" title="(disponible dans Python v2.7)">dict</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.Mapper._module">
<code class="descname">_module</code><em class="property"> = 'connector'</em><a class="headerlink" href="#connector.components.mapper.Mapper._module" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="connector.components.mapper.ImportMapper">
<em class="property">class </em><code class="descclassname">connector.components.mapper.</code><code class="descname">ImportMapper</code><span class="sig-paren">(</span><em>work_context</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#ImportMapper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.ImportMapper" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Bases : <a class="reference internal" href="#odoo.addons.component.core.AbstractComponent" title="odoo.addons.component.core.AbstractComponent"><code class="xref py py-class docutils literal"><span class="pre">odoo.addons.component.core.AbstractComponent</span></code></a></p>
<p><a class="reference internal" href="#connector.components.mapper.Mapper" title="connector.components.mapper.Mapper"><code class="xref py py-class docutils literal"><span class="pre">Mapper</span></code></a> pour les imports.</p>
<p>Transforme un enregistrement depuis un backend vers un enregistrement Odoo</p>
<dl class="attribute">
<dt id="connector.components.mapper.ImportMapper._name">
<code class="descname">_name</code><em class="property"> = 'base.import.mapper'</em><a class="headerlink" href="#connector.components.mapper.ImportMapper._name" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.ImportMapper._inherit">
<code class="descname">_inherit</code><em class="property"> = 'base.mapper'</em><a class="headerlink" href="#connector.components.mapper.ImportMapper._inherit" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.ImportMapper._usage">
<code class="descname">_usage</code><em class="property"> = 'import.mapper'</em><a class="headerlink" href="#connector.components.mapper.ImportMapper._usage" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.ImportMapper._map_child_usage">
<code class="descname">_map_child_usage</code><em class="property"> = 'import.map.child'</em><a class="headerlink" href="#connector.components.mapper.ImportMapper._map_child_usage" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.ImportMapper._map_child_fallback">
<code class="descname">_map_child_fallback</code><em class="property"> = 'base.map.child.import'</em><a class="headerlink" href="#connector.components.mapper.ImportMapper._map_child_fallback" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="connector.components.mapper.ImportMapper._map_direct">
<code class="descname">_map_direct</code><span class="sig-paren">(</span><em>record</em>, <em>from_attr</em>, <em>to_attr</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#ImportMapper._map_direct"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.ImportMapper._map_direct" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Apply the <code class="docutils literal"><span class="pre">direct</span></code> mappings.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Paramètres:</th><td class="field-body"><ul class="first last simple">
<li><strong>record</strong> – record to convert from a source to a target</li>
<li><strong>from_attr</strong> (<em>callable | str</em>) – name of the source attribute or a callable</li>
<li><strong>to_attr</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(disponible dans Python v2.7)"><em>str</em></a>) – name of the target attribute</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.ImportMapper._module">
<code class="descname">_module</code><em class="property"> = 'connector'</em><a class="headerlink" href="#connector.components.mapper.ImportMapper._module" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="connector.components.mapper.ExportMapper">
<em class="property">class </em><code class="descclassname">connector.components.mapper.</code><code class="descname">ExportMapper</code><span class="sig-paren">(</span><em>work_context</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#ExportMapper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.ExportMapper" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Bases : <a class="reference internal" href="#odoo.addons.component.core.AbstractComponent" title="odoo.addons.component.core.AbstractComponent"><code class="xref py py-class docutils literal"><span class="pre">odoo.addons.component.core.AbstractComponent</span></code></a></p>
<p><a class="reference internal" href="#connector.components.mapper.Mapper" title="connector.components.mapper.Mapper"><code class="xref py py-class docutils literal"><span class="pre">Mapper</span></code></a> pour les exports.</p>
<p>Transforme un enregistrement depuis Odoo vers un enregistrement du backend</p>
<dl class="attribute">
<dt id="connector.components.mapper.ExportMapper._name">
<code class="descname">_name</code><em class="property"> = 'base.export.mapper'</em><a class="headerlink" href="#connector.components.mapper.ExportMapper._name" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.ExportMapper._inherit">
<code class="descname">_inherit</code><em class="property"> = 'base.mapper'</em><a class="headerlink" href="#connector.components.mapper.ExportMapper._inherit" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.ExportMapper._usage">
<code class="descname">_usage</code><em class="property"> = 'export.mapper'</em><a class="headerlink" href="#connector.components.mapper.ExportMapper._usage" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.ExportMapper._map_child_usage">
<code class="descname">_map_child_usage</code><em class="property"> = 'export.map.child'</em><a class="headerlink" href="#connector.components.mapper.ExportMapper._map_child_usage" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.ExportMapper._map_child_fallback">
<code class="descname">_map_child_fallback</code><em class="property"> = 'base.map.child.export'</em><a class="headerlink" href="#connector.components.mapper.ExportMapper._map_child_fallback" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="connector.components.mapper.ExportMapper._map_direct">
<code class="descname">_map_direct</code><span class="sig-paren">(</span><em>record</em>, <em>from_attr</em>, <em>to_attr</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#ExportMapper._map_direct"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.ExportMapper._map_direct" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Apply the <code class="docutils literal"><span class="pre">direct</span></code> mappings.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Paramètres:</th><td class="field-body"><ul class="first last simple">
<li><strong>record</strong> – record to convert from a source to a target</li>
<li><strong>from_attr</strong> (<em>callable | str</em>) – name of the source attribute or a callable</li>
<li><strong>to_attr</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(disponible dans Python v2.7)"><em>str</em></a>) – name of the target attribute</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.ExportMapper._module">
<code class="descname">_module</code><em class="property"> = 'connector'</em><a class="headerlink" href="#connector.components.mapper.ExportMapper._module" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="connector.components.mapper.MapRecord">
<em class="property">class </em><code class="descclassname">connector.components.mapper.</code><code class="descname">MapRecord</code><span class="sig-paren">(</span><em>mapper</em>, <em>source</em>, <em>parent=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#MapRecord"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.MapRecord" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Bases : <a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(disponible dans Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Un enregistrement préparé à être converti en utilisans un <a class="reference internal" href="#connector.components.mapper.Mapper" title="connector.components.mapper.Mapper"><code class="xref py py-class docutils literal"><span class="pre">Mapper</span></code></a>.</p>
<p>Les instances de MapRecord sont préparées par <a class="reference internal" href="#connector.components.mapper.Mapper.map_record" title="connector.components.mapper.Mapper.map_record"><code class="xref py py-meth docutils literal"><span class="pre">Mapper.map_record()</span></code></a>.</p>
<p>Utilisation</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">map_record</span> <span class="o">=</span> <span class="n">mapper</span><span class="o">.</span><span class="n">map_record</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">output_values</span> <span class="o">=</span> <span class="n">map_record</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
</pre></div>
</div>
<p>Voir <a class="reference internal" href="#connector.components.mapper.MapRecord.values" title="connector.components.mapper.MapRecord.values"><code class="xref py py-meth docutils literal"><span class="pre">values()</span></code></a> pour avoir plus d’informations sur les arguments disponibles.</p>
<dl class="attribute">
<dt id="connector.components.mapper.MapRecord.source">
<code class="descname">source</code><a class="headerlink" href="#connector.components.mapper.MapRecord.source" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Enregistrement source à convertir</p>
</dd></dl>

<dl class="attribute">
<dt id="connector.components.mapper.MapRecord.parent">
<code class="descname">parent</code><a class="headerlink" href="#connector.components.mapper.MapRecord.parent" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Enregistrement parent si l’enregistrement en cours est un item</p>
</dd></dl>

<dl class="method">
<dt id="connector.components.mapper.MapRecord.values">
<code class="descname">values</code><span class="sig-paren">(</span><em>for_create=None</em>, <em>fields=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#MapRecord.values"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.MapRecord.values" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Construit et renvoie les valeurs converties selon les options.</p>
<p>Utilisation</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">map_record</span> <span class="o">=</span> <span class="n">mapper</span><span class="o">.</span><span class="n">map_record</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">output_values</span> <span class="o">=</span> <span class="n">map_record</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
</pre></div>
</div>
<dl class="docutils">
<dt>Création des enregistrements</dt>
<dd><p class="first">En utilisant l’option <code class="docutils literal"><span class="pre">for_create</span></code>, seuls les mappings décorés avec <code class="docutils literal"><span class="pre">&#64;only_create</span></code> seront mappés.</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">output_values</span> <span class="o">=</span> <span class="n">map_record</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">for_create</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>Filtrer sur les champs</dt>
<dd><p class="first">En utilisant l’argument <code class="docutils literal"><span class="pre">fields</span></code>, les mappings seront filtrés en utilisant soit la clé source dans les arguments <code class="docutils literal"><span class="pre">direct</span></code>, soit les arguments <code class="docutils literal"><span class="pre">changed_by</span></code> pour les méthodes de mapping.</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">output_values</span> <span class="o">=</span> <span class="n">map_record</span><span class="o">.</span><span class="n">values</span><span class="p">(</span>
<span class="go">        fields=[&#39;name&#39;, &#39;street&#39;]</span>
<span class="go">    )</span>
</pre></div>
</div>
</dd>
<dt>Options spécifiques</dt>
<dd><p class="first">Des clé et valeurs arbitraires peuvent être définies dans les arguments <code class="docutils literal"><span class="pre">kwargs</span></code>.  Elles peuvent être ensuites utilisées dans les méthodes de mapping en utilisant <code class="docutils literal"><span class="pre">self.options</span></code>.</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">output_values</span> <span class="o">=</span> <span class="n">map_record</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">tax_include</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Paramètres:</th><td class="field-body"><ul class="first last simple">
<li><strong>for_create</strong> (<em>boolean</em>) – précise si seuls les mappings de création (<code class="docutils literal"><span class="pre">&#64;only_create</span></code>) doivent être mappés.</li>
<li><strong>fields</strong> (<em>list</em>) – filtre sur les champs</li>
<li><strong>**kwargs</strong> – options spécifiques, elles peuvent être utilisées plus tard dans les méthodes de mapping</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="connector.components.mapper.MapRecord.update">
<code class="descname">update</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/mapper.html#MapRecord.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.MapRecord.update" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Force des valeurs à appliquer après une conversion.</p>
<p>Utilisation</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">map_record</span> <span class="o">=</span> <span class="n">mapper</span><span class="o">.</span><span class="n">map_record</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">map_record</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">output_values</span> <span class="o">=</span> <span class="n">map_record</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
<span class="go"># output_values will at least contain {&#39;a&#39;: 1}</span>
</pre></div>
</div>
<p>Les valeurs affectées avec <code class="docutils literal"><span class="pre">update()</span></code> sont appliquées dans tous les cas, elles ont une priorité supérieure que les valeurs converties.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="connector.components.mapper.MapOptions">
<em class="property">class </em><code class="descclassname">connector.components.mapper.</code><code class="descname">MapOptions</code><a class="reference internal" href="../_modules/connector/components/mapper.html#MapOptions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.mapper.MapOptions" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Bases : <a class="reference external" href="https://docs.python.org/2/library/stdtypes.html#dict" title="(disponible dans Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">dict</span></code></a></p>
<p>Conteneur pour les options des mappeurs.</p>
<p>Des options peuvent être accédées grâce aux attributs de l’instance. Quand une option est accédée mais n’existe pas, ceci renvoie None.</p>
</dd></dl>

</div>
<span class="target" id="module-connector.components.backend_adapter"></span><div class="section" id="backend-adapter">
<h3>Adaptateur de backend<a class="headerlink" href="#backend-adapter" title="Lien permanent vers ce titre">¶</a></h3>
<p>An external adapter has a common interface to speak with the backend.
It translates the basic orders (search, read, write) to the protocol
used by the backend.</p>
<dl class="class">
<dt id="connector.components.backend_adapter.BackendAdapter">
<em class="property">class </em><code class="descclassname">connector.components.backend_adapter.</code><code class="descname">BackendAdapter</code><span class="sig-paren">(</span><em>work_context</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/backend_adapter.html#BackendAdapter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.backend_adapter.BackendAdapter" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Bases : <a class="reference internal" href="#odoo.addons.component.core.AbstractComponent" title="odoo.addons.component.core.AbstractComponent"><code class="xref py py-class docutils literal"><span class="pre">odoo.addons.component.core.AbstractComponent</span></code></a></p>
<p>Adaptateur de backend de base pour les connecteurs</p>
<dl class="attribute">
<dt id="connector.components.backend_adapter.BackendAdapter._name">
<code class="descname">_name</code><em class="property"> = 'base.backend.adapter'</em><a class="headerlink" href="#connector.components.backend_adapter.BackendAdapter._name" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.backend_adapter.BackendAdapter._inherit">
<code class="descname">_inherit</code><em class="property"> = 'base.connector'</em><a class="headerlink" href="#connector.components.backend_adapter.BackendAdapter._inherit" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.backend_adapter.BackendAdapter._usage">
<code class="descname">_usage</code><em class="property"> = 'backend.adapter'</em><a class="headerlink" href="#connector.components.backend_adapter.BackendAdapter._usage" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.backend_adapter.BackendAdapter._module">
<code class="descname">_module</code><em class="property"> = 'connector'</em><a class="headerlink" href="#connector.components.backend_adapter.BackendAdapter._module" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="connector.components.backend_adapter.CRUDAdapter">
<em class="property">class </em><code class="descclassname">connector.components.backend_adapter.</code><code class="descname">CRUDAdapter</code><span class="sig-paren">(</span><em>work_context</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/backend_adapter.html#CRUDAdapter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.backend_adapter.CRUDAdapter" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Bases : <a class="reference internal" href="#odoo.addons.component.core.AbstractComponent" title="odoo.addons.component.core.AbstractComponent"><code class="xref py py-class docutils literal"><span class="pre">odoo.addons.component.core.AbstractComponent</span></code></a></p>
<p>Adaptateur externe de base spécialisé dans la gestion des enregistrements des systèmes externes.</p>
<p>This is an empty shell, Components can inherit and implement their own
implementation for the methods.</p>
<dl class="attribute">
<dt id="connector.components.backend_adapter.CRUDAdapter._name">
<code class="descname">_name</code><em class="property"> = 'base.backend.adapter.crud'</em><a class="headerlink" href="#connector.components.backend_adapter.CRUDAdapter._name" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.backend_adapter.CRUDAdapter._inherit">
<code class="descname">_inherit</code><em class="property"> = 'base.backend.adapter'</em><a class="headerlink" href="#connector.components.backend_adapter.CRUDAdapter._inherit" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.backend_adapter.CRUDAdapter._usage">
<code class="descname">_usage</code><em class="property"> = 'backend.adapter'</em><a class="headerlink" href="#connector.components.backend_adapter.CRUDAdapter._usage" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="connector.components.backend_adapter.CRUDAdapter.search">
<code class="descname">search</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/backend_adapter.html#CRUDAdapter.search"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.backend_adapter.CRUDAdapter.search" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Recherche des enregistrements correspondant à certains critères et renvoie une liste d’IDs</p>
</dd></dl>

<dl class="method">
<dt id="connector.components.backend_adapter.CRUDAdapter.read">
<code class="descname">read</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/backend_adapter.html#CRUDAdapter.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.backend_adapter.CRUDAdapter.read" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Renvoie des informations sur l’enregistrement</p>
</dd></dl>

<dl class="method">
<dt id="connector.components.backend_adapter.CRUDAdapter.search_read">
<code class="descname">search_read</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/backend_adapter.html#CRUDAdapter.search_read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.backend_adapter.CRUDAdapter.search_read" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Recherche des enregistrements correspondant à certains critères et renvoie leurs données</p>
</dd></dl>

<dl class="method">
<dt id="connector.components.backend_adapter.CRUDAdapter.create">
<code class="descname">create</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/backend_adapter.html#CRUDAdapter.create"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.backend_adapter.CRUDAdapter.create" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Crée un enregistrement dans le système externe</p>
</dd></dl>

<dl class="method">
<dt id="connector.components.backend_adapter.CRUDAdapter.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/backend_adapter.html#CRUDAdapter.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.backend_adapter.CRUDAdapter.write" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Met à jour les enregistrements sur le système externe</p>
</dd></dl>

<dl class="method">
<dt id="connector.components.backend_adapter.CRUDAdapter.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/backend_adapter.html#CRUDAdapter.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.backend_adapter.CRUDAdapter.delete" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Supprime un enregistrement sur le système externe</p>
</dd></dl>

<dl class="attribute">
<dt id="connector.components.backend_adapter.CRUDAdapter._module">
<code class="descname">_module</code><em class="property"> = 'connector'</em><a class="headerlink" href="#connector.components.backend_adapter.CRUDAdapter._module" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<span class="target" id="module-connector.components.synchronizer"></span><div class="section" id="synchronizer">
<h3>Synchroniseur<a class="headerlink" href="#synchronizer" title="Lien permanent vers ce titre">¶</a></h3>
<p>A synchronizer orchestrates a synchronization with a backend.  It can be a
record’s import or export, a deletion of something, or anything else.  For
instance, it will use the mappings to convert the data between both systems,
the backend adapters to read or write data on the backend and the binders to
create the link between them.</p>
<dl class="class">
<dt id="connector.components.synchronizer.Synchronizer">
<em class="property">class </em><code class="descclassname">connector.components.synchronizer.</code><code class="descname">Synchronizer</code><span class="sig-paren">(</span><em>work_context</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/synchronizer.html#Synchronizer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.synchronizer.Synchronizer" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Bases : <a class="reference internal" href="#odoo.addons.component.core.AbstractComponent" title="odoo.addons.component.core.AbstractComponent"><code class="xref py py-class docutils literal"><span class="pre">odoo.addons.component.core.AbstractComponent</span></code></a></p>
<p>Classe de base des synchroniseurs</p>
<dl class="attribute">
<dt id="connector.components.synchronizer.Synchronizer._name">
<code class="descname">_name</code><em class="property"> = 'base.synchronizer'</em><a class="headerlink" href="#connector.components.synchronizer.Synchronizer._name" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.synchronizer.Synchronizer._inherit">
<code class="descname">_inherit</code><em class="property"> = 'base.connector'</em><a class="headerlink" href="#connector.components.synchronizer.Synchronizer._inherit" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.synchronizer.Synchronizer._base_mapper_usage">
<code class="descname">_base_mapper_usage</code><em class="property"> = 'mapper'</em><a class="headerlink" href="#connector.components.synchronizer.Synchronizer._base_mapper_usage" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.synchronizer.Synchronizer._base_backend_adapter_usage">
<code class="descname">_base_backend_adapter_usage</code><em class="property"> = 'backend.adapter'</em><a class="headerlink" href="#connector.components.synchronizer.Synchronizer._base_backend_adapter_usage" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="connector.components.synchronizer.Synchronizer.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/synchronizer.html#Synchronizer.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.synchronizer.Synchronizer.run" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Lance la synchronisation</p>
</dd></dl>

<dl class="attribute">
<dt id="connector.components.synchronizer.Synchronizer.mapper">
<code class="descname">mapper</code><a class="headerlink" href="#connector.components.synchronizer.Synchronizer.mapper" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Renvoie une instance de mappeur <code class="docutils literal"><span class="pre">Mapper</span></code> pour la synchronisation</p>
<p>L’instanciation est retardée parce que certaines synchronisations n’ont pas besoin d’une telle unité et celle-ci peut ne pas exister.</p>
<p>It looks for a Component with <code class="docutils literal"><span class="pre">_usage</span></code> being equal to
<code class="docutils literal"><span class="pre">_base_mapper_usage</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type retourné:</th><td class="field-body"><a class="reference internal" href="#odoo.addons.component.core.Component" title="odoo.addons.component.core.Component"><code class="xref py py-class docutils literal"><span class="pre">odoo.addons.component.core.Component</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="connector.components.synchronizer.Synchronizer.binder">
<code class="descname">binder</code><a class="headerlink" href="#connector.components.synchronizer.Synchronizer.binder" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Renvoie une instance de liaison <code class="docutils literal"><span class="pre">Binder</span></code> pour la synchronisation.</p>
<p>L’instanciation est retardée parce que certaines synchronisations n’ont pas besoin d’une telle unité et celle-ci peut ne pas exister.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type retourné:</th><td class="field-body"><a class="reference internal" href="#odoo.addons.component.core.Component" title="odoo.addons.component.core.Component"><code class="xref py py-class docutils literal"><span class="pre">odoo.addons.component.core.Component</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="connector.components.synchronizer.Synchronizer.backend_adapter">
<code class="descname">backend_adapter</code><a class="headerlink" href="#connector.components.synchronizer.Synchronizer.backend_adapter" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Renvoie une instance de <code class="docutils literal"><span class="pre">BackendAdapter</span></code> pour la synchronisation.</p>
<p>L’instanciation est retardée parce que certaines synchronisations n’ont pas besoin d’une telle unité et celle-ci peut ne pas exister.</p>
<p>It looks for a Component with <code class="docutils literal"><span class="pre">_usage</span></code> being equal to
<code class="docutils literal"><span class="pre">_base_backend_adapter_usage</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type retourné:</th><td class="field-body"><a class="reference internal" href="#odoo.addons.component.core.Component" title="odoo.addons.component.core.Component"><code class="xref py py-class docutils literal"><span class="pre">odoo.addons.component.core.Component</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="connector.components.synchronizer.Synchronizer._module">
<code class="descname">_module</code><em class="property"> = 'connector'</em><a class="headerlink" href="#connector.components.synchronizer.Synchronizer._module" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="connector.components.synchronizer.Exporter">
<em class="property">class </em><code class="descclassname">connector.components.synchronizer.</code><code class="descname">Exporter</code><span class="sig-paren">(</span><em>work_context</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/synchronizer.html#Exporter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.synchronizer.Exporter" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Bases : <a class="reference internal" href="#odoo.addons.component.core.AbstractComponent" title="odoo.addons.component.core.AbstractComponent"><code class="xref py py-class docutils literal"><span class="pre">odoo.addons.component.core.AbstractComponent</span></code></a></p>
<p>Synchroniseur pour exporter des donnés d’Odoo vers un backend</p>
<dl class="attribute">
<dt id="connector.components.synchronizer.Exporter._name">
<code class="descname">_name</code><em class="property"> = 'base.exporter'</em><a class="headerlink" href="#connector.components.synchronizer.Exporter._name" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.synchronizer.Exporter._inherit">
<code class="descname">_inherit</code><em class="property"> = 'base.synchronizer'</em><a class="headerlink" href="#connector.components.synchronizer.Exporter._inherit" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.synchronizer.Exporter._usage">
<code class="descname">_usage</code><em class="property"> = 'exporter'</em><a class="headerlink" href="#connector.components.synchronizer.Exporter._usage" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.synchronizer.Exporter._base_mapper_usage">
<code class="descname">_base_mapper_usage</code><em class="property"> = 'export.mapper'</em><a class="headerlink" href="#connector.components.synchronizer.Exporter._base_mapper_usage" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.synchronizer.Exporter._module">
<code class="descname">_module</code><em class="property"> = 'connector'</em><a class="headerlink" href="#connector.components.synchronizer.Exporter._module" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="connector.components.synchronizer.GenericExporter">
<em class="property">class </em><code class="descclassname">connector.components.synchronizer.</code><code class="descname">GenericExporter</code><span class="sig-paren">(</span><em>working_context</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/synchronizer.html#GenericExporter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.synchronizer.GenericExporter" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Bases : <a class="reference internal" href="#odoo.addons.component.core.AbstractComponent" title="odoo.addons.component.core.AbstractComponent"><code class="xref py py-class docutils literal"><span class="pre">odoo.addons.component.core.AbstractComponent</span></code></a></p>
<p>Generic Synchronizer for exporting data from Odoo to a backend</p>
<dl class="attribute">
<dt id="connector.components.synchronizer.GenericExporter._name">
<code class="descname">_name</code><em class="property"> = 'generic.exporter'</em><a class="headerlink" href="#connector.components.synchronizer.GenericExporter._name" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.synchronizer.GenericExporter._inherit">
<code class="descname">_inherit</code><em class="property"> = 'base.exporter'</em><a class="headerlink" href="#connector.components.synchronizer.GenericExporter._inherit" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.synchronizer.GenericExporter._default_binding_field">
<code class="descname">_default_binding_field</code><em class="property"> = None</em><a class="headerlink" href="#connector.components.synchronizer.GenericExporter._default_binding_field" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="connector.components.synchronizer.GenericExporter._should_import">
<code class="descname">_should_import</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/synchronizer.html#GenericExporter._should_import"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.synchronizer.GenericExporter._should_import" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="connector.components.synchronizer.GenericExporter._delay_import">
<code class="descname">_delay_import</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/synchronizer.html#GenericExporter._delay_import"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.synchronizer.GenericExporter._delay_import" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Schedule an import of the record.</p>
<p>Adapt in the sub-classes when the model is not imported
using <code class="docutils literal"><span class="pre">import_record</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="connector.components.synchronizer.GenericExporter.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>binding</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/synchronizer.html#GenericExporter.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.synchronizer.GenericExporter.run" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Lance la synchronisation</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Paramètres:</th><td class="field-body"><strong>binding</strong> – binding record to export</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="connector.components.synchronizer.GenericExporter._run">
<code class="descname">_run</code><span class="sig-paren">(</span><em>fields=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/synchronizer.html#GenericExporter._run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.synchronizer.GenericExporter._run" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Flow of the synchronization, implemented in inherited classes</p>
</dd></dl>

<dl class="method">
<dt id="connector.components.synchronizer.GenericExporter._after_export">
<code class="descname">_after_export</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/synchronizer.html#GenericExporter._after_export"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.synchronizer.GenericExporter._after_export" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Can do several actions after exporting a record on the backend</p>
</dd></dl>

<dl class="method">
<dt id="connector.components.synchronizer.GenericExporter._lock">
<code class="descname">_lock</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/synchronizer.html#GenericExporter._lock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.synchronizer.GenericExporter._lock" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Lock the binding record.</p>
<p>Lock the binding record so we are sure that only one export
job is running for this record if concurrent jobs have to export the
same record.</p>
<p>When concurrent jobs try to export the same record, the first one
will lock and proceed, the others will fail to lock and will be
retried later.</p>
<p>This behavior works also when the export becomes multilevel
with <a class="reference internal" href="#connector.components.synchronizer.GenericExporter._export_dependencies" title="connector.components.synchronizer.GenericExporter._export_dependencies"><code class="xref py py-meth docutils literal"><span class="pre">_export_dependencies()</span></code></a>. Each level will set its own lock
on the binding record it has to export.</p>
</dd></dl>

<dl class="method">
<dt id="connector.components.synchronizer.GenericExporter._has_to_skip">
<code class="descname">_has_to_skip</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/synchronizer.html#GenericExporter._has_to_skip"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.synchronizer.GenericExporter._has_to_skip" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Return True if the export can be skipped</p>
</dd></dl>

<dl class="method">
<dt id="connector.components.synchronizer.GenericExporter._retry_unique_violation">
<code class="descname">_retry_unique_violation</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/synchronizer.html#GenericExporter._retry_unique_violation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.synchronizer.GenericExporter._retry_unique_violation" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Context manager: catch Unique constraint error and retry the
job later.</p>
<p>When we execute several jobs workers concurrently, it happens
that 2 jobs are creating the same record at the same time (binding
record created by <a class="reference internal" href="#connector.components.synchronizer.GenericExporter._export_dependency" title="connector.components.synchronizer.GenericExporter._export_dependency"><code class="xref py py-meth docutils literal"><span class="pre">_export_dependency()</span></code></a>), resulting in:</p>
<blockquote>
<div>IntegrityError: duplicate key value violates unique
constraint «&nbsp;my_backend_product_product_odoo_uniq&nbsp;»
DETAIL:  Key (backend_id, odoo_id)=(1, 4851) already exists.</div></blockquote>
<p>In that case, we’ll retry the import just later.</p>
<div class="admonition warning">
<p class="first admonition-title">Avertissement</p>
<p class="last">The unique constraint must be created on the
binding record to prevent 2 bindings to be created
for the same External record.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="connector.components.synchronizer.GenericExporter._export_dependency">
<code class="descname">_export_dependency</code><span class="sig-paren">(</span><em>relation</em>, <em>binding_model</em>, <em>component_usage='record.exporter'</em>, <em>binding_field=None</em>, <em>binding_extra_vals=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/synchronizer.html#GenericExporter._export_dependency"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.synchronizer.GenericExporter._export_dependency" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Export a dependency. The exporter class is a subclass of
<code class="docutils literal"><span class="pre">GenericExporter</span></code>. If a more precise class need to be defined,
it can be passed to the <code class="docutils literal"><span class="pre">exporter_class</span></code> keyword argument.</p>
<div class="admonition warning">
<p class="first admonition-title">Avertissement</p>
<p>a commit is done at the end of the export of each
dependency. The reason for that is that we pushed a record
on the backend and we absolutely have to keep its ID.</p>
<p>So you <em>must</em> take care not to modify the Odoo
database during an export, excepted when writing
back the external ID or eventually to store
external data that we have to keep on this side.</p>
<p class="last">You should call this method only at the beginning
of the exporter synchronization,
in <a class="reference internal" href="#connector.components.synchronizer.GenericExporter._export_dependencies" title="connector.components.synchronizer.GenericExporter._export_dependencies"><code class="xref py py-meth docutils literal"><span class="pre">_export_dependencies()</span></code></a>.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Paramètres:</th><td class="field-body"><ul class="first simple">
<li><strong>relation</strong> (<code class="xref py py-class docutils literal"><span class="pre">odoo.models.BaseModel</span></code>) – record to export if not already exported</li>
<li><strong>binding_model</strong> (<em>str | unicode</em>) – name of the binding model for the relation</li>
<li><strong>component_usage</strong> – “usage” to look for to find the Component to
for the export, by default “record.exporter”</li>
<li><strong>binding_field</strong> (<em>str | unicode</em>) – name of the one2many field on a normal
record that points to the binding record
(default: my_backend_bind_ids).
It is used only when the relation is not
a binding but is a normal record.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Binding_extra_vals:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first last">In case we want to create a new binding
pass extra values for this binding</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="connector.components.synchronizer.GenericExporter._export_dependencies">
<code class="descname">_export_dependencies</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/synchronizer.html#GenericExporter._export_dependencies"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.synchronizer.GenericExporter._export_dependencies" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Export the dependencies for the record</p>
</dd></dl>

<dl class="method">
<dt id="connector.components.synchronizer.GenericExporter._map_data">
<code class="descname">_map_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/synchronizer.html#GenericExporter._map_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.synchronizer.GenericExporter._map_data" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Returns an instance of
<code class="xref py py-class docutils literal"><span class="pre">MapRecord</span></code></p>
</dd></dl>

<dl class="method">
<dt id="connector.components.synchronizer.GenericExporter._validate_create_data">
<code class="descname">_validate_create_data</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/synchronizer.html#GenericExporter._validate_create_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.synchronizer.GenericExporter._validate_create_data" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Check if the values to import are correct</p>
<p>Pro-actively check before the <code class="docutils literal"><span class="pre">Model.create</span></code> if some fields
are missing or invalid</p>
<p>Raise <cite>InvalidDataError</cite></p>
</dd></dl>

<dl class="method">
<dt id="connector.components.synchronizer.GenericExporter._validate_update_data">
<code class="descname">_validate_update_data</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/synchronizer.html#GenericExporter._validate_update_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.synchronizer.GenericExporter._validate_update_data" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Check if the values to import are correct</p>
<p>Pro-actively check before the <code class="docutils literal"><span class="pre">Model.update</span></code> if some fields
are missing or invalid</p>
<p>Raise <cite>InvalidDataError</cite></p>
</dd></dl>

<dl class="method">
<dt id="connector.components.synchronizer.GenericExporter._create_data">
<code class="descname">_create_data</code><span class="sig-paren">(</span><em>map_record</em>, <em>fields=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/synchronizer.html#GenericExporter._create_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.synchronizer.GenericExporter._create_data" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Get the data to pass to <a class="reference internal" href="#connector.components.synchronizer.GenericExporter._create" title="connector.components.synchronizer.GenericExporter._create"><code class="xref py py-meth docutils literal"><span class="pre">_create()</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="connector.components.synchronizer.GenericExporter._create">
<code class="descname">_create</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/synchronizer.html#GenericExporter._create"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.synchronizer.GenericExporter._create" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Create the External record</p>
</dd></dl>

<dl class="method">
<dt id="connector.components.synchronizer.GenericExporter._update_data">
<code class="descname">_update_data</code><span class="sig-paren">(</span><em>map_record</em>, <em>fields=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/synchronizer.html#GenericExporter._update_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.synchronizer.GenericExporter._update_data" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Get the data to pass to <a class="reference internal" href="#connector.components.synchronizer.GenericExporter._update" title="connector.components.synchronizer.GenericExporter._update"><code class="xref py py-meth docutils literal"><span class="pre">_update()</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="connector.components.synchronizer.GenericExporter._update">
<code class="descname">_update</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/synchronizer.html#GenericExporter._update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.synchronizer.GenericExporter._update" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Update an External record</p>
</dd></dl>

<dl class="attribute">
<dt id="connector.components.synchronizer.GenericExporter._module">
<code class="descname">_module</code><em class="property"> = 'connector'</em><a class="headerlink" href="#connector.components.synchronizer.GenericExporter._module" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="connector.components.synchronizer.Importer">
<em class="property">class </em><code class="descclassname">connector.components.synchronizer.</code><code class="descname">Importer</code><span class="sig-paren">(</span><em>work_context</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/synchronizer.html#Importer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.synchronizer.Importer" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Bases : <a class="reference internal" href="#odoo.addons.component.core.AbstractComponent" title="odoo.addons.component.core.AbstractComponent"><code class="xref py py-class docutils literal"><span class="pre">odoo.addons.component.core.AbstractComponent</span></code></a></p>
<p>Synchroniseur pour importer des données d’un backend vers Odoo</p>
<dl class="attribute">
<dt id="connector.components.synchronizer.Importer._name">
<code class="descname">_name</code><em class="property"> = 'base.importer'</em><a class="headerlink" href="#connector.components.synchronizer.Importer._name" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.synchronizer.Importer._inherit">
<code class="descname">_inherit</code><em class="property"> = 'base.synchronizer'</em><a class="headerlink" href="#connector.components.synchronizer.Importer._inherit" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.synchronizer.Importer._usage">
<code class="descname">_usage</code><em class="property"> = 'importer'</em><a class="headerlink" href="#connector.components.synchronizer.Importer._usage" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.synchronizer.Importer._base_mapper_usage">
<code class="descname">_base_mapper_usage</code><em class="property"> = 'import.mapper'</em><a class="headerlink" href="#connector.components.synchronizer.Importer._base_mapper_usage" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.synchronizer.Importer._module">
<code class="descname">_module</code><em class="property"> = 'connector'</em><a class="headerlink" href="#connector.components.synchronizer.Importer._module" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="connector.components.synchronizer.Deleter">
<em class="property">class </em><code class="descclassname">connector.components.synchronizer.</code><code class="descname">Deleter</code><span class="sig-paren">(</span><em>work_context</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/synchronizer.html#Deleter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.synchronizer.Deleter" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Bases : <a class="reference internal" href="#odoo.addons.component.core.AbstractComponent" title="odoo.addons.component.core.AbstractComponent"><code class="xref py py-class docutils literal"><span class="pre">odoo.addons.component.core.AbstractComponent</span></code></a></p>
<p>Synchroniseur pour effacer un enregistrement du backend</p>
<dl class="attribute">
<dt id="connector.components.synchronizer.Deleter._name">
<code class="descname">_name</code><em class="property"> = 'base.deleter'</em><a class="headerlink" href="#connector.components.synchronizer.Deleter._name" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.synchronizer.Deleter._inherit">
<code class="descname">_inherit</code><em class="property"> = 'base.synchronizer'</em><a class="headerlink" href="#connector.components.synchronizer.Deleter._inherit" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.synchronizer.Deleter._usage">
<code class="descname">_usage</code><em class="property"> = 'deleter'</em><a class="headerlink" href="#connector.components.synchronizer.Deleter._usage" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.synchronizer.Deleter._module">
<code class="descname">_module</code><em class="property"> = 'connector'</em><a class="headerlink" href="#connector.components.synchronizer.Deleter._module" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<span class="target" id="module-connector.components.listener"></span><div class="section" id="listeners">
<h3>Listeners<a class="headerlink" href="#listeners" title="Lien permanent vers ce titre">¶</a></h3>
<p>Listeners are Components notified when events happen.
Documentation in <a class="reference internal" href="api_event.html#module-odoo.addons.component_event.components.event" title="odoo.addons.component_event.components.event"><code class="xref py py-mod docutils literal"><span class="pre">odoo.addons.component_event.components.event</span></code></a></p>
<p>The base listener for the connectors add a method
<a class="reference internal" href="#connector.components.listener.ConnectorListener.no_connector_export" title="connector.components.listener.ConnectorListener.no_connector_export"><code class="xref py py-meth docutils literal"><span class="pre">ConnectorListener.no_connector_export()</span></code></a> which can be used with
<code class="xref py py-func docutils literal"><span class="pre">odoo.addons.component_event.skip_if()</span></code>.</p>
<dl class="class">
<dt id="connector.components.listener.ConnectorListener">
<em class="property">class </em><code class="descclassname">connector.components.listener.</code><code class="descname">ConnectorListener</code><span class="sig-paren">(</span><em>work_context</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/listener.html#ConnectorListener"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.listener.ConnectorListener" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Bases : <a class="reference internal" href="#odoo.addons.component.core.AbstractComponent" title="odoo.addons.component.core.AbstractComponent"><code class="xref py py-class docutils literal"><span class="pre">odoo.addons.component.core.AbstractComponent</span></code></a></p>
<p>Adaptateur de backend de base pour les connecteurs</p>
<dl class="attribute">
<dt id="connector.components.listener.ConnectorListener._name">
<code class="descname">_name</code><em class="property"> = 'base.connector.listener'</em><a class="headerlink" href="#connector.components.listener.ConnectorListener._name" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="connector.components.listener.ConnectorListener._inherit">
<code class="descname">_inherit</code><em class="property"> = ['base.connector', 'base.event.listener']</em><a class="headerlink" href="#connector.components.listener.ConnectorListener._inherit" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="connector.components.listener.ConnectorListener.no_connector_export">
<code class="descname">no_connector_export</code><span class="sig-paren">(</span><em>record</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/components/listener.html#ConnectorListener.no_connector_export"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.components.listener.ConnectorListener.no_connector_export" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Return if the “connector_no_export” has been set in context</p>
<p>To be used with <code class="xref py py-func docutils literal"><span class="pre">odoo.addons.component_event.skip_if()</span></code>
on Events:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">odoo.addons.component.core</span> <span class="k">import</span> <span class="n">Component</span>
<span class="kn">from</span> <span class="nn">odoo.addons.component_event</span> <span class="k">import</span> <span class="n">skip_if</span>


<span class="k">class</span> <span class="nc">MyEventListener</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;my.event.listener&#39;</span>
    <span class="n">_inherit</span> <span class="o">=</span> <span class="s1">&#39;base.connector.event.listener&#39;</span>
    <span class="n">_apply_on</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;magento.res.partner&#39;</span><span class="p">]</span>

    <span class="nd">@skip_if</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span>
             <span class="bp">self</span><span class="o">.</span><span class="n">no_connector_export</span><span class="p">(</span><span class="n">record</span><span class="p">))</span>
    <span class="k">def</span> <span class="nf">on_record_write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">record</span><span class="o">.</span><span class="n">with_delay</span><span class="p">()</span><span class="o">.</span><span class="n">export_record</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="connector.components.listener.ConnectorListener._module">
<code class="descname">_module</code><em class="property"> = 'connector'</em><a class="headerlink" href="#connector.components.listener.ConnectorListener._module" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-odoo.addons.component.models.collection">
<span id="components-collection-model"></span><h2>Components Collection Model<a class="headerlink" href="#module-odoo.addons.component.models.collection" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="collection-model">
<h3>Collection Model<a class="headerlink" href="#collection-model" title="Lien permanent vers ce titre">¶</a></h3>
<p>This is the base Model shared by all the Collections.
In the context of the Connector, a collection is the Backend.
The <cite>_name</cite> given to the Collection Model will be the name
to use in the <cite>_collection</cite> of the Components usable for the Backend.</p>
<dl class="class">
<dt id="odoo.addons.component.models.collection.Collection">
<em class="property">class </em><code class="descclassname">odoo.addons.component.models.collection.</code><code class="descname">Collection</code><span class="sig-paren">(</span><em>pool</em>, <em>cr</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/odoo/addons/component/models/collection.html#Collection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#odoo.addons.component.models.collection.Collection" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Bases : <code class="xref py py-class docutils literal"><span class="pre">odoo.models.BaseModel</span></code></p>
<p>The model on which components are subscribed</p>
<p>It would be for instance the <code class="docutils literal"><span class="pre">backend</span></code> for the connectors.</p>
<p>Exemples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MagentoBackend</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;magento.backend&#39;</span>  <span class="c1"># name of the collection</span>
    <span class="n">_inherit</span> <span class="o">=</span> <span class="s1">&#39;collection.base&#39;</span>


<span class="k">class</span> <span class="nc">MagentoSaleImporter</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;magento.sale.importer&#39;</span>
    <span class="n">_apply_on</span> <span class="o">=</span> <span class="s1">&#39;magento.sale.order&#39;</span>
    <span class="n">_collection</span> <span class="o">=</span> <span class="s1">&#39;magento.backend&#39;</span>  <span class="c1"># name of the collection</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">magento_id</span><span class="p">):</span>
        <span class="n">mapper</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="p">(</span><span class="n">usage</span><span class="o">=</span><span class="s1">&#39;import.mapper&#39;</span><span class="p">)</span>
        <span class="n">extra_mappers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">many_components</span><span class="p">(</span>
            <span class="n">usage</span><span class="o">=</span><span class="s1">&#39;import.mapper.extra&#39;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="c1"># ...</span>
</pre></div>
</div>
<p>Use it:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">backend</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">[</span><span class="s1">&#39;magento.backend&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">browse</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">backend</span><span class="o">.</span><span class="n">work_on</span><span class="p">(</span><span class="s1">&#39;magento.sale.order&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">work</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">importer</span> <span class="o">=</span> <span class="n">work</span><span class="o">.</span><span class="n">component</span><span class="p">(</span><span class="n">usage</span><span class="o">=</span><span class="s1">&#39;magento.sale.importer&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">importer</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>See also: <a class="reference internal" href="#odoo.addons.component.core.WorkContext" title="odoo.addons.component.core.WorkContext"><code class="xref py py-class docutils literal"><span class="pre">odoo.addons.component.core.WorkContext</span></code></a></p>
<dl class="method">
<dt id="odoo.addons.component.models.collection.Collection.work_on">
<code class="descname">work_on</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/odoo/addons/component/models/collection.html#Collection.work_on"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#odoo.addons.component.models.collection.Collection.work_on" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Entry-point for the components, context manager</p>
<p>Start a work using the components on the model.
Any keyword argument will be assigned to the work context.
See documentation of <a class="reference internal" href="#odoo.addons.component.core.WorkContext" title="odoo.addons.component.core.WorkContext"><code class="xref py py-class docutils literal"><span class="pre">odoo.addons.component.core.WorkContext</span></code></a>.</p>
<p>It is a context manager, so you can attach objects and clean them
at the end of the work session, such as:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@contextmanager</span>
<span class="nd">@api</span><span class="o">.</span><span class="n">multi</span>
<span class="k">def</span> <span class="nf">work_on</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ensure_one</span><span class="p">()</span>
    <span class="n">magento_location</span> <span class="o">=</span> <span class="n">MagentoLocation</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">username</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">password</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="c1"># We create a Magento Client API here, so we can create the</span>
    <span class="c1"># client once (lazily on the first use) and propagate it</span>
    <span class="c1"># through all the sync session, instead of recreating a client</span>
    <span class="c1"># in each backend adapter usage.</span>
    <span class="k">with</span> <span class="n">MagentoAPI</span><span class="p">(</span><span class="n">magento_location</span><span class="p">)</span> <span class="k">as</span> <span class="n">magento_api</span><span class="p">:</span>
        <span class="n">_super</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">MagentoBackend</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="c1"># from the components we&#39;ll be able to do:</span>
        <span class="c1"># self.work.magento_api</span>
        <span class="k">with</span> <span class="n">_super</span><span class="o">.</span><span class="n">work_on</span><span class="p">(</span>
                <span class="n">model_name</span><span class="p">,</span> <span class="n">magento_api</span><span class="o">=</span><span class="n">magento_api</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
                <span class="p">)</span> <span class="k">as</span> <span class="n">work</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">work</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-odoo.addons.component.exception">
<span id="components-exceptions"></span><h2>Components Exceptions<a class="headerlink" href="#module-odoo.addons.component.exception" title="Lien permanent vers ce titre">¶</a></h2>
<dl class="exception">
<dt id="odoo.addons.component.exception.ComponentException">
<em class="property">exception </em><code class="descclassname">odoo.addons.component.exception.</code><code class="descname">ComponentException</code><a class="reference internal" href="../_modules/odoo/addons/component/exception.html#ComponentException"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#odoo.addons.component.exception.ComponentException" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Bases : <a class="reference external" href="https://docs.python.org/2/library/exceptions.html#exceptions.Exception" title="(disponible dans Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></code></a></p>
<p>Base Exception for the components</p>
</dd></dl>

<dl class="exception">
<dt id="odoo.addons.component.exception.NoComponentError">
<em class="property">exception </em><code class="descclassname">odoo.addons.component.exception.</code><code class="descname">NoComponentError</code><a class="reference internal" href="../_modules/odoo/addons/component/exception.html#NoComponentError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#odoo.addons.component.exception.NoComponentError" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Bases : <a class="reference internal" href="#odoo.addons.component.exception.ComponentException" title="odoo.addons.component.exception.ComponentException"><code class="xref py py-class docutils literal"><span class="pre">odoo.addons.component.exception.ComponentException</span></code></a></p>
<p>No component has been found</p>
</dd></dl>

<dl class="exception">
<dt id="odoo.addons.component.exception.SeveralComponentError">
<em class="property">exception </em><code class="descclassname">odoo.addons.component.exception.</code><code class="descname">SeveralComponentError</code><a class="reference internal" href="../_modules/odoo/addons/component/exception.html#SeveralComponentError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#odoo.addons.component.exception.SeveralComponentError" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Bases : <a class="reference internal" href="#odoo.addons.component.exception.ComponentException" title="odoo.addons.component.exception.ComponentException"><code class="xref py py-class docutils literal"><span class="pre">odoo.addons.component.exception.ComponentException</span></code></a></p>
<p>More than one component have been found</p>
</dd></dl>

</div>
<div class="section" id="components-internals">
<h2>Components Internals<a class="headerlink" href="#components-internals" title="Lien permanent vers ce titre">¶</a></h2>
<p>Low-level APIs of the Components.</p>
<span class="target" id="module-odoo.addons.component.core"></span><div class="section" id="core">
<h3>Core<a class="headerlink" href="#core" title="Lien permanent vers ce titre">¶</a></h3>
<p>Core classes for the components.
The most common classes used publicly are:</p>
<ul class="simple">
<li><a class="reference internal" href="#odoo.addons.component.core.Component" title="odoo.addons.component.core.Component"><code class="xref py py-class docutils literal"><span class="pre">Component</span></code></a></li>
<li><a class="reference internal" href="#odoo.addons.component.core.AbstractComponent" title="odoo.addons.component.core.AbstractComponent"><code class="xref py py-class docutils literal"><span class="pre">AbstractComponent</span></code></a></li>
<li><a class="reference internal" href="#odoo.addons.component.core.WorkContext" title="odoo.addons.component.core.WorkContext"><code class="xref py py-class docutils literal"><span class="pre">WorkContext</span></code></a></li>
</ul>
<dl class="class">
<dt id="odoo.addons.component.core.ComponentDatabases">
<em class="property">class </em><code class="descclassname">odoo.addons.component.core.</code><code class="descname">ComponentDatabases</code><a class="reference internal" href="../_modules/odoo/addons/component/core.html#ComponentDatabases"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#odoo.addons.component.core.ComponentDatabases" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Bases : <a class="reference external" href="https://docs.python.org/2/library/stdtypes.html#dict" title="(disponible dans Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">dict</span></code></a></p>
<p>Holds a registry of components for each database</p>
</dd></dl>

<dl class="class">
<dt id="odoo.addons.component.core.ComponentRegistry">
<em class="property">class </em><code class="descclassname">odoo.addons.component.core.</code><code class="descname">ComponentRegistry</code><span class="sig-paren">(</span><em>cachesize=512</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/odoo/addons/component/core.html#ComponentRegistry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#odoo.addons.component.core.ComponentRegistry" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Bases : <a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(disponible dans Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Store all the components and allow to find them using criteria</p>
<p>The key is the <code class="docutils literal"><span class="pre">_name</span></code> of the components.</p>
<p>This is an OrderedDict, because we want to keep the registration order of
the components, addons loaded first have their components found first.</p>
<p>The <code class="xref py py-attr docutils literal"><span class="pre">ready</span></code> attribute must be set to <code class="docutils literal"><span class="pre">True</span></code> when all the components
are loaded.</p>
<dl class="method">
<dt id="odoo.addons.component.core.ComponentRegistry.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>key</em>, <em>default=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/odoo/addons/component/core.html#ComponentRegistry.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#odoo.addons.component.core.ComponentRegistry.get" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="odoo.addons.component.core.ComponentRegistry.load_components">
<code class="descname">load_components</code><span class="sig-paren">(</span><em>module</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/odoo/addons/component/core.html#ComponentRegistry.load_components"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#odoo.addons.component.core.ComponentRegistry.load_components" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="odoo.addons.component.core.ComponentRegistry.lookup">
<code class="descname">lookup</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/odoo/addons/component/core.html#ComponentRegistry.lookup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#odoo.addons.component.core.ComponentRegistry.lookup" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Find and return a list of components for a usage</p>
<p>If a component is not registered in a particular collection (no
<code class="docutils literal"><span class="pre">_collection</span></code>), it will be returned in any case (as far as
the <code class="docutils literal"><span class="pre">usage</span></code> and <code class="docutils literal"><span class="pre">model_name</span></code> match).  This is useful to share
generic components across different collections.</p>
<p>If no collection name is given, components from any collection
will be returned.</p>
<p>Then, the components of a collection are filtered by usage and/or
model. The <code class="docutils literal"><span class="pre">_usage</span></code> is mandatory on the components. When the
<code class="docutils literal"><span class="pre">_model_name</span></code> is empty, it means it can be used for every models,
and it will ignore the <code class="docutils literal"><span class="pre">model_name</span></code> argument.</p>
<p>The abstract components are never returned.</p>
<p>This is a rather low-level function, usually you will use the
high-level <a class="reference internal" href="#odoo.addons.component.core.AbstractComponent.component" title="odoo.addons.component.core.AbstractComponent.component"><code class="xref py py-meth docutils literal"><span class="pre">AbstractComponent.component()</span></code></a>,
<a class="reference internal" href="#odoo.addons.component.core.AbstractComponent.many_components" title="odoo.addons.component.core.AbstractComponent.many_components"><code class="xref py py-meth docutils literal"><span class="pre">AbstractComponent.many_components()</span></code></a> or even
<a class="reference internal" href="#odoo.addons.component.core.AbstractComponent.component_by_name" title="odoo.addons.component.core.AbstractComponent.component_by_name"><code class="xref py py-meth docutils literal"><span class="pre">AbstractComponent.component_by_name()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Paramètres:</th><td class="field-body"><ul class="first last simple">
<li><strong>collection_name</strong> – the name of the collection the component is
registered into.</li>
<li><strong>usage</strong> – the usage of component we are looking for</li>
<li><strong>model_name</strong> – filter on components that apply on this model</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="odoo.addons.component.core.WorkContext">
<em class="property">class </em><code class="descclassname">odoo.addons.component.core.</code><code class="descname">WorkContext</code><span class="sig-paren">(</span><em>model_name=None</em>, <em>collection=None</em>, <em>components_registry=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/odoo/addons/component/core.html#WorkContext"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#odoo.addons.component.core.WorkContext" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Bases : <a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(disponible dans Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Transport the context required to work with components</p>
<p>It is propagated through all the components, so any
data or instance (like a random RPC client) that need
to be propagated transversally to the components
should be kept here.</p>
<p>Including:</p>
<dl class="attribute">
<dt id="odoo.addons.component.core.WorkContext.model_name">
<code class="descname">model_name</code><a class="headerlink" href="#odoo.addons.component.core.WorkContext.model_name" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Name of the model we are working with. It means that any lookup for a
component will be done for this model. It also provides a shortcut
as a <cite>model</cite> attribute to use directly with the Odoo model from
the components</p>
</dd></dl>

<dl class="attribute">
<dt id="odoo.addons.component.core.WorkContext.collection">
<code class="descname">collection</code><a class="headerlink" href="#odoo.addons.component.core.WorkContext.collection" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>The collection we are working with. The collection is an Odoo
Model that inherit from “collection.base”. The collection attribute
can be a record or an «&nbsp;empty&nbsp;» model.</p>
</dd></dl>

<dl class="attribute">
<dt id="odoo.addons.component.core.WorkContext.model">
<code class="descname">model</code><a class="headerlink" href="#odoo.addons.component.core.WorkContext.model" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Odoo Model for <code class="docutils literal"><span class="pre">model_name</span></code> with the same Odoo
<code class="xref py py-class docutils literal"><span class="pre">Environment</span></code> than the <code class="docutils literal"><span class="pre">collection</span></code> attribute.</p>
</dd></dl>

<p>This is also the entrypoint to work with the components.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">collection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">[</span><span class="s1">&#39;my.collection&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">browse</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">work</span> <span class="o">=</span> <span class="n">WorkContext</span><span class="p">(</span><span class="n">model_name</span><span class="o">=</span><span class="s1">&#39;res.partner&#39;</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="n">collection</span><span class="p">)</span>
<span class="n">component</span> <span class="o">=</span> <span class="n">work</span><span class="o">.</span><span class="n">component</span><span class="p">(</span><span class="n">usage</span><span class="o">=</span><span class="s1">&#39;record.importer&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Usually you will use the context manager on the <code class="docutils literal"><span class="pre">collection.base</span></code> Model:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">collection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">[</span><span class="s1">&#39;my.collection&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">browse</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">with</span> <span class="n">collection</span><span class="o">.</span><span class="n">work_on</span><span class="p">(</span><span class="s1">&#39;res.partner&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">work</span><span class="p">:</span>
    <span class="n">component</span> <span class="o">=</span> <span class="n">work</span><span class="o">.</span><span class="n">component</span><span class="p">(</span><span class="n">usage</span><span class="o">=</span><span class="s1">&#39;record.importer&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>It supports any arbitrary keyword arguments that will become attributes of
the instance, and be propagated throughout all the components.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">collection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">[</span><span class="s1">&#39;my.collection&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">browse</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">with</span> <span class="n">collection</span><span class="o">.</span><span class="n">work_on</span><span class="p">(</span><span class="s1">&#39;res.partner&#39;</span><span class="p">,</span> <span class="n">hello</span><span class="o">=</span><span class="s1">&#39;world&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">work</span><span class="p">:</span>
    <span class="k">assert</span> <span class="n">work</span><span class="o">.</span><span class="n">hello</span> <span class="o">==</span> <span class="s1">&#39;world&#39;</span>
</pre></div>
</div>
<p>When you need to work on a different model, a new work instance will be
created for you when you are using the high-level API. This is what
happens under the hood:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">collection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">[</span><span class="s1">&#39;my.collection&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">browse</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">with</span> <span class="n">collection</span><span class="o">.</span><span class="n">work_on</span><span class="p">(</span><span class="s1">&#39;res.partner&#39;</span><span class="p">,</span> <span class="n">hello</span><span class="o">=</span><span class="s1">&#39;world&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">work</span><span class="p">:</span>
    <span class="k">assert</span> <span class="n">work</span><span class="o">.</span><span class="n">model_name</span> <span class="o">==</span> <span class="s1">&#39;res.partner&#39;</span>
    <span class="k">assert</span> <span class="n">work</span><span class="o">.</span><span class="n">hello</span> <span class="o">==</span> <span class="s1">&#39;world&#39;</span>
    <span class="n">work2</span> <span class="o">=</span> <span class="n">work</span><span class="o">.</span><span class="n">work_on</span><span class="p">(</span><span class="s1">&#39;res.users&#39;</span><span class="p">)</span>
    <span class="c1"># =&gt; spawn a new WorkContext with a copy of the attributes</span>
    <span class="k">assert</span> <span class="n">work2</span><span class="o">.</span><span class="n">model_name</span> <span class="o">==</span> <span class="s1">&#39;res.users&#39;</span>
    <span class="k">assert</span> <span class="n">work2</span><span class="o">.</span><span class="n">hello</span> <span class="o">==</span> <span class="s1">&#39;world&#39;</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="odoo.addons.component.core.WorkContext.env">
<code class="descname">env</code><a class="headerlink" href="#odoo.addons.component.core.WorkContext.env" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Return the current Odoo env</p>
<p>This is the environment of the current collection.</p>
</dd></dl>

<dl class="method">
<dt id="odoo.addons.component.core.WorkContext.work_on">
<code class="descname">work_on</code><span class="sig-paren">(</span><em>model_name=None</em>, <em>collection=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/odoo/addons/component/core.html#WorkContext.work_on"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#odoo.addons.component.core.WorkContext.work_on" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Create a new work context for another model keeping attributes</p>
<p>Used when one need to lookup components for another model.</p>
</dd></dl>

<dl class="method">
<dt id="odoo.addons.component.core.WorkContext.component_by_name">
<code class="descname">component_by_name</code><span class="sig-paren">(</span><em>name</em>, <em>model_name=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/odoo/addons/component/core.html#WorkContext.component_by_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#odoo.addons.component.core.WorkContext.component_by_name" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Return a component by its name</p>
<p>If the component exists, an instance of it will be returned,
initialized with the current <a class="reference internal" href="#odoo.addons.component.core.WorkContext" title="odoo.addons.component.core.WorkContext"><code class="xref py py-class docutils literal"><span class="pre">WorkContext</span></code></a>.</p>
<p>A <a class="reference internal" href="#odoo.addons.component.exception.NoComponentError" title="odoo.addons.component.exception.NoComponentError"><code class="xref py py-exc docutils literal"><span class="pre">odoo.addons.component.exception.NoComponentError</span></code></a> is raised
if:</p>
<ul class="simple">
<li>no component with this name exists</li>
<li>the <code class="docutils literal"><span class="pre">_apply_on</span></code> of the found component does not match
with the current working model</li>
</ul>
<p>In the latter case, it can be an indication that you need to switch to
a different model, you can do so by providing the <code class="docutils literal"><span class="pre">model_name</span></code>
argument.</p>
</dd></dl>

<dl class="method">
<dt id="odoo.addons.component.core.WorkContext.component">
<code class="descname">component</code><span class="sig-paren">(</span><em>usage=None</em>, <em>model_name=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/odoo/addons/component/core.html#WorkContext.component"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#odoo.addons.component.core.WorkContext.component" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Find a component by usage and model for the current collection</p>
<p>It searches a component using the rules of
<a class="reference internal" href="#odoo.addons.component.core.ComponentRegistry.lookup" title="odoo.addons.component.core.ComponentRegistry.lookup"><code class="xref py py-meth docutils literal"><span class="pre">ComponentRegistry.lookup()</span></code></a>. When a component is found,
it initialize it with the current <a class="reference internal" href="#odoo.addons.component.core.WorkContext" title="odoo.addons.component.core.WorkContext"><code class="xref py py-class docutils literal"><span class="pre">WorkContext</span></code></a> and returned.</p>
<p>A component with a <code class="docutils literal"><span class="pre">_apply_on</span></code> matching the asked <code class="docutils literal"><span class="pre">model_name</span></code>
takes precedence over a generic component without <code class="docutils literal"><span class="pre">_apply_on</span></code>.
A component with a <code class="docutils literal"><span class="pre">_collection</span></code> matching the current collection
takes precedence over a generic component without <code class="docutils literal"><span class="pre">_collection</span></code>.
This behavior allows to define generic components across collections
and/or models and override them only for a particular collection and/or
model.</p>
<p>A <a class="reference internal" href="#odoo.addons.component.exception.SeveralComponentError" title="odoo.addons.component.exception.SeveralComponentError"><code class="xref py py-exc docutils literal"><span class="pre">odoo.addons.component.exception.SeveralComponentError</span></code></a> is
raised if more than one component match for the provided
<code class="docutils literal"><span class="pre">usage</span></code>/<code class="docutils literal"><span class="pre">model_name</span></code>.</p>
<p>A <a class="reference internal" href="#odoo.addons.component.exception.NoComponentError" title="odoo.addons.component.exception.NoComponentError"><code class="xref py py-exc docutils literal"><span class="pre">odoo.addons.component.exception.NoComponentError</span></code></a> is raised
if no component is found for the provided <code class="docutils literal"><span class="pre">usage</span></code>/<code class="docutils literal"><span class="pre">model_name</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="odoo.addons.component.core.WorkContext.many_components">
<code class="descname">many_components</code><span class="sig-paren">(</span><em>usage=None</em>, <em>model_name=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/odoo/addons/component/core.html#WorkContext.many_components"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#odoo.addons.component.core.WorkContext.many_components" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Find many components by usage and model for the current collection</p>
<p>It searches a component using the rules of
<a class="reference internal" href="#odoo.addons.component.core.ComponentRegistry.lookup" title="odoo.addons.component.core.ComponentRegistry.lookup"><code class="xref py py-meth docutils literal"><span class="pre">ComponentRegistry.lookup()</span></code></a>. When components are found, they
initialized with the current <a class="reference internal" href="#odoo.addons.component.core.WorkContext" title="odoo.addons.component.core.WorkContext"><code class="xref py py-class docutils literal"><span class="pre">WorkContext</span></code></a> and returned as a
list.</p>
<p>If no component is found, an empty list is returned.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="odoo.addons.component.core.MetaComponent">
<em class="property">class </em><code class="descclassname">odoo.addons.component.core.</code><code class="descname">MetaComponent</code><span class="sig-paren">(</span><em>name</em>, <em>bases</em>, <em>attrs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/odoo/addons/component/core.html#MetaComponent"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#odoo.addons.component.core.MetaComponent" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Bases : <a class="reference external" href="https://docs.python.org/2/library/functions.html#type" title="(disponible dans Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">type</span></code></a></p>
<p>Metaclass for Components</p>
<p>Every new <a class="reference internal" href="#odoo.addons.component.core.Component" title="odoo.addons.component.core.Component"><code class="xref py py-class docutils literal"><span class="pre">Component</span></code></a> will be added to <code class="docutils literal"><span class="pre">_modules_components</span></code>,
that will be used by the component builder.</p>
<dl class="attribute">
<dt id="odoo.addons.component.core.MetaComponent.apply_on_models">
<code class="descname">apply_on_models</code><a class="headerlink" href="#odoo.addons.component.core.MetaComponent.apply_on_models" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="odoo.addons.component.core.AbstractComponent">
<em class="property">class </em><code class="descclassname">odoo.addons.component.core.</code><code class="descname">AbstractComponent</code><span class="sig-paren">(</span><em>work_context</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/odoo/addons/component/core.html#AbstractComponent"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#odoo.addons.component.core.AbstractComponent" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Bases : <a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(disponible dans Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Main Component Model</p>
<p>All components have a Python inheritance either on
<a class="reference internal" href="#odoo.addons.component.core.AbstractComponent" title="odoo.addons.component.core.AbstractComponent"><code class="xref py py-class docutils literal"><span class="pre">AbstractComponent</span></code></a> or either on <a class="reference internal" href="#odoo.addons.component.core.Component" title="odoo.addons.component.core.Component"><code class="xref py py-class docutils literal"><span class="pre">Component</span></code></a>.</p>
<p>Abstract Components will not be returned by lookups on components, however
they can be used as a base for other Components through inheritance (using
<code class="docutils literal"><span class="pre">_inherit</span></code>).</p>
<dl class="docutils">
<dt>Inheritance mechanism</dt>
<dd><p class="first">The inheritance mechanism is like the Odoo’s one for Models.  Each
component has a <code class="docutils literal"><span class="pre">_name</span></code>. This is the absolute minimum in a Component
class.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyComponent</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;my.component&#39;</span>

    <span class="k">def</span> <span class="nf">speak</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
        <span class="nb">print</span> <span class="n">message</span>
</pre></div>
</div>
<p>Every component implicitly inherit from the <cite>“base”</cite> component.</p>
<p>There are two close but distinct inheritance types, which look
familiar if you already know Odoo.  The first uses <code class="docutils literal"><span class="pre">_inherit</span></code> with
an existing name, the name of the component we want to extend.  With
the following example, <code class="docutils literal"><span class="pre">my.component</span></code> is now able to speak and to
yell.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyComponent</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>  <span class="c1"># name of the class does not matter</span>
    <span class="n">_inherit</span> <span class="o">=</span> <span class="s1">&#39;my.component&#39;</span>

    <span class="k">def</span> <span class="nf">yell</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
        <span class="nb">print</span> <span class="n">message</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
</pre></div>
</div>
<p>The second has a different <code class="docutils literal"><span class="pre">_name</span></code>, it creates a new component,
including the behavior of the inherited component, but without
modifying it. In the following example, <code class="docutils literal"><span class="pre">my.component</span></code> is still able
to speak and to yell (brough by the previous inherit), but not to
sing.  <code class="docutils literal"><span class="pre">another.component</span></code> is able to speak, to yell and to sing.</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AnotherComponent</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;another.component&#39;</span>
    <span class="n">_inherit</span> <span class="o">=</span> <span class="s1">&#39;my.component&#39;</span>

    <span class="k">def</span> <span class="nf">sing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
        <span class="nb">print</span> <span class="n">message</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
</pre></div>
</div>
</dd>
<dt>Registration and lookups</dt>
<dd><p class="first">It is handled by 3 attributes on the class:</p>
<dl class="docutils">
<dt>_collection</dt>
<dd>The name of the collection where we want to register the
component.  This is not strictly mandatory as a component can be
shared across several collections. But usually, you want to set a
collection to segregate the components for a domain.  A collection
can be for instance <code class="docutils literal"><span class="pre">magento.backend</span></code>. It is also the name of a
model that inherits from <code class="docutils literal"><span class="pre">collection.base</span></code>.  See also
<a class="reference internal" href="#odoo.addons.component.core.WorkContext" title="odoo.addons.component.core.WorkContext"><code class="xref py py-class docutils literal"><span class="pre">WorkContext</span></code></a> and
<a class="reference internal" href="#odoo.addons.component.models.collection.Collection" title="odoo.addons.component.models.collection.Collection"><code class="xref py py-class docutils literal"><span class="pre">Collection</span></code></a>.</dd>
<dt>_apply_on</dt>
<dd>List of names or name of the Odoo model(s) for which the component
can be used.  When not set, the component can be used on any model.</dd>
<dt>_usage</dt>
<dd>The collection and the model (<code class="docutils literal"><span class="pre">_apply_on</span></code>) will help to filter
the candidate components according to our working context (e.g. I’m
working on <code class="docutils literal"><span class="pre">magento.backend</span></code> with the model
<code class="docutils literal"><span class="pre">magento.res.partner</span></code>).  The usage will define <strong>what</strong> kind of
task the component we are looking for serves to. For instance, it
might be <code class="docutils literal"><span class="pre">record.importer</span></code>, <code class="docutils literal"><span class="pre">export.mapper`</span></code>… but you can be
as creative as you want.</dd>
</dl>
<p>Now, to get a component, you’ll likely use
<a class="reference internal" href="#odoo.addons.component.core.WorkContext.component" title="odoo.addons.component.core.WorkContext.component"><code class="xref py py-meth docutils literal"><span class="pre">WorkContext.component()</span></code></a> when you start to work with components
in your flow, but then from within your components, you are more
likely to use one of:</p>
<ul class="simple">
<li><a class="reference internal" href="#odoo.addons.component.core.AbstractComponent.component" title="odoo.addons.component.core.AbstractComponent.component"><code class="xref py py-meth docutils literal"><span class="pre">component()</span></code></a></li>
<li><a class="reference internal" href="#odoo.addons.component.core.AbstractComponent.many_components" title="odoo.addons.component.core.AbstractComponent.many_components"><code class="xref py py-meth docutils literal"><span class="pre">many_components()</span></code></a></li>
<li><a class="reference internal" href="#odoo.addons.component.core.AbstractComponent.component_by_name" title="odoo.addons.component.core.AbstractComponent.component_by_name"><code class="xref py py-meth docutils literal"><span class="pre">component_by_name()</span></code></a> (more rarely though)</li>
</ul>
<p>Declaration of some Components can look like:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">FooBar</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;foo.bar.collection&#39;</span>
    <span class="n">_inherit</span> <span class="o">=</span> <span class="s1">&#39;collection.base&#39;</span>  <span class="c1"># this inherit is required</span>


<span class="k">class</span> <span class="nc">FooBarBase</span><span class="p">(</span><span class="n">AbstractComponent</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;foo.bar.base&#39;</span>
    <span class="n">_collection</span> <span class="o">=</span> <span class="s1">&#39;foo.bar.collection&#39;</span>  <span class="c1"># name of the model above</span>


<span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;foo&#39;</span>
    <span class="n">_inherit</span> <span class="o">=</span> <span class="s1">&#39;foo.bar.base&#39;</span>  <span class="c1"># we will inherit the _collection</span>
    <span class="n">_apply_on</span> <span class="o">=</span> <span class="s1">&#39;res.users&#39;</span>
    <span class="n">_usage</span> <span class="o">=</span> <span class="s1">&#39;speak&#39;</span>

    <span class="k">def</span> <span class="nf">utter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
        <span class="nb">print</span> <span class="n">message</span>


<span class="k">class</span> <span class="nc">Bar</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span>
    <span class="n">_inherit</span> <span class="o">=</span> <span class="s1">&#39;foo.bar.base&#39;</span>  <span class="c1"># we will inherit the _collection</span>
    <span class="n">_apply_on</span> <span class="o">=</span> <span class="s1">&#39;res.users&#39;</span>
    <span class="n">_usage</span> <span class="o">=</span> <span class="s1">&#39;yell&#39;</span>

    <span class="k">def</span> <span class="nf">utter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
        <span class="nb">print</span> <span class="n">message</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;!!!&#39;</span>


<span class="k">class</span> <span class="nc">Vocalizer</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;vocalizer&#39;</span>
    <span class="n">_inherit</span> <span class="o">=</span> <span class="s1">&#39;foo.bar.base&#39;</span>
    <span class="n">_usage</span> <span class="o">=</span> <span class="s1">&#39;vocalizer&#39;</span>
    <span class="c1"># can be used for any model</span>

    <span class="k">def</span> <span class="nf">vocalize</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="p">(</span><span class="n">usage</span><span class="o">=</span><span class="n">action</span><span class="p">)</span><span class="o">.</span><span class="n">utter</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</pre></div>
</div>
<p>And their usage:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">coll</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">[</span><span class="s1">&#39;foo.bar.collection&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">browse</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">coll</span><span class="o">.</span><span class="n">work_on</span><span class="p">(</span><span class="s1">&#39;res.users&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">work</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">vocalizer</span> <span class="o">=</span> <span class="n">work</span><span class="o">.</span><span class="n">component</span><span class="p">(</span><span class="n">usage</span><span class="o">=</span><span class="s1">&#39;vocalizer&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">vocalizer</span><span class="o">.</span><span class="n">vocalize</span><span class="p">(</span><span class="s1">&#39;speak&#39;</span><span class="p">,</span> <span class="s1">&#39;hello world&#39;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">hello world</span>
<span class="gp">... </span>    <span class="n">vocalizer</span><span class="o">.</span><span class="n">vocalize</span><span class="p">(</span><span class="s1">&#39;yell&#39;</span><span class="p">,</span> <span class="s1">&#39;hello world&#39;</span><span class="p">)</span>
<span class="go">HELLO WORLD!!!</span>
</pre></div>
</div>
</dd>
</dl>
<p>Hints:</p>
<ul class="simple">
<li>If you want to create components without <code class="docutils literal"><span class="pre">_apply_on</span></code>, choose a
<code class="docutils literal"><span class="pre">_usage</span></code> that will not conflict other existing components.</li>
<li>Unless this is what you want and in that case you use
<a class="reference internal" href="#odoo.addons.component.core.AbstractComponent.many_components" title="odoo.addons.component.core.AbstractComponent.many_components"><code class="xref py py-meth docutils literal"><span class="pre">many_components()</span></code></a> which will return all components for a usage
with a matching or a not set <code class="docutils literal"><span class="pre">_apply_on</span></code>.</li>
<li>It is advised to namespace the names of the components (e.g.
<code class="docutils literal"><span class="pre">magento.xxx</span></code>) to prevent conflicts between addons.</li>
</ul>
<dl class="attribute">
<dt id="odoo.addons.component.core.AbstractComponent.collection">
<code class="descname">collection</code><a class="headerlink" href="#odoo.addons.component.core.AbstractComponent.collection" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Collection we are working with</p>
</dd></dl>

<dl class="attribute">
<dt id="odoo.addons.component.core.AbstractComponent.env">
<code class="descname">env</code><a class="headerlink" href="#odoo.addons.component.core.AbstractComponent.env" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Current Odoo environment, the one of the collection record</p>
</dd></dl>

<dl class="attribute">
<dt id="odoo.addons.component.core.AbstractComponent.model">
<code class="descname">model</code><a class="headerlink" href="#odoo.addons.component.core.AbstractComponent.model" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>The model instance we are working with</p>
</dd></dl>

<dl class="method">
<dt id="odoo.addons.component.core.AbstractComponent.component_by_name">
<code class="descname">component_by_name</code><span class="sig-paren">(</span><em>name</em>, <em>model_name=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/odoo/addons/component/core.html#AbstractComponent.component_by_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#odoo.addons.component.core.AbstractComponent.component_by_name" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Return a component by its name</p>
<p>Shortcut to meth:<cite>~WorkContext.component_by_name</cite></p>
</dd></dl>

<dl class="method">
<dt id="odoo.addons.component.core.AbstractComponent.component">
<code class="descname">component</code><span class="sig-paren">(</span><em>usage=None</em>, <em>model_name=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/odoo/addons/component/core.html#AbstractComponent.component"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#odoo.addons.component.core.AbstractComponent.component" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Return a component</p>
<p>Shortcut to meth:<cite>~WorkContext.component</cite></p>
</dd></dl>

<dl class="method">
<dt id="odoo.addons.component.core.AbstractComponent.many_components">
<code class="descname">many_components</code><span class="sig-paren">(</span><em>usage=None</em>, <em>model_name=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/odoo/addons/component/core.html#AbstractComponent.many_components"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#odoo.addons.component.core.AbstractComponent.many_components" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Return several components</p>
<p>Shortcut to meth:<cite>~WorkContext.many_components</cite></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="odoo.addons.component.core.Component">
<em class="property">class </em><code class="descclassname">odoo.addons.component.core.</code><code class="descname">Component</code><span class="sig-paren">(</span><em>work_context</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/odoo/addons/component/core.html#Component"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#odoo.addons.component.core.Component" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Bases : <a class="reference internal" href="#odoo.addons.component.core.AbstractComponent" title="odoo.addons.component.core.AbstractComponent"><code class="xref py py-class docutils literal"><span class="pre">odoo.addons.component.core.AbstractComponent</span></code></a></p>
<p>Concrete Component class</p>
<p>This is the class you inherit from when you want your component to
be registered in the component collections.</p>
<p>Look in <a class="reference internal" href="#odoo.addons.component.core.AbstractComponent" title="odoo.addons.component.core.AbstractComponent"><code class="xref py py-class docutils literal"><span class="pre">AbstractComponent</span></code></a> for more details.</p>
</dd></dl>

</div>
<span class="target" id="module-odoo.addons.component.builder"></span><div class="section" id="components-builder">
<h3>Components Builder<a class="headerlink" href="#components-builder" title="Lien permanent vers ce titre">¶</a></h3>
<p>Build the components at the build of a registry.</p>
<dl class="class">
<dt id="odoo.addons.component.builder.ComponentBuilder">
<em class="property">class </em><code class="descclassname">odoo.addons.component.builder.</code><code class="descname">ComponentBuilder</code><span class="sig-paren">(</span><em>pool</em>, <em>cr</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/odoo/addons/component/builder.html#ComponentBuilder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#odoo.addons.component.builder.ComponentBuilder" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Bases : <code class="xref py py-class docutils literal"><span class="pre">odoo.models.BaseModel</span></code></p>
<p>Build the component classes</p>
<p>And register them in a global registry.</p>
<p>Every time an Odoo registry is built, the know components are cleared and
rebuilt as well.  The Component classes are built using the same mechanism
than Odoo’s Models: a final class is created, taking every Components with
a <code class="docutils literal"><span class="pre">_name</span></code> and applying Components with an <code class="docutils literal"><span class="pre">_inherits</span></code> upon them.</p>
<p>The final Component classes are registered in global registry.</p>
<p>This class is an Odoo model, allowing us to hook the build of the
components at the end of the Odoo’s registry loading, using
<code class="docutils literal"><span class="pre">_register_hook</span></code>. This method is called after all modules are loaded, so
we are sure that we have all the components Classes and in the correct
order.</p>
<dl class="method">
<dt id="odoo.addons.component.builder.ComponentBuilder.build_registry">
<code class="descname">build_registry</code><span class="sig-paren">(</span><em>components_registry</em>, <em>states=None</em>, <em>exclude_addons=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/odoo/addons/component/builder.html#ComponentBuilder.build_registry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#odoo.addons.component.builder.ComponentBuilder.build_registry" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="odoo.addons.component.builder.ComponentBuilder.load_components">
<code class="descname">load_components</code><span class="sig-paren">(</span><em>module</em>, <em>components_registry=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/odoo/addons/component/builder.html#ComponentBuilder.load_components"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#odoo.addons.component.builder.ComponentBuilder.load_components" title="Lien permanent vers cette définition">¶</a></dt>
<dd><p>Build every component known by MetaComponent for an odoo module</p>
<p>The final component (composed by all the Component classes in this
module) will be pushed into the registry.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Paramètres:</th><td class="field-body"><ul class="first last simple">
<li><strong>module</strong> (<em>str | unicode</em>) – the name of the addon for which we want to load
the components</li>
<li><strong>registry</strong> (<a class="reference internal" href="#odoo.addons.component.core.ComponentRegistry" title="odoo.addons.component.core.ComponentRegistry"><code class="xref py py-class docutils literal"><span class="pre">ComponentRegistry</span></code></a>) – the registry in which we want to put the Component</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../_sources/api/api_components.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2013, Camptocamp SA.<br/>
      Créé avec <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.7.<br/>
    </p>
  </div>
</footer>
  </body>
</html>