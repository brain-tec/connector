<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Backend &#8212; Connector  documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Event" href="api_event.html" />
    <link rel="prev" title="Session" href="api_session.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-7628916-3', 'odoo-connector.com');
  ga('send', 'pageview');
</script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          Odoo Connector</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
  <li class="dropdown">
    <a role="button"
       id="dLabelTranslations"
       data-toggle="dropdown"
       data-target="#"
       href="#">Translations<b class="caret"></b></a>
    <ul class="dropdown-menu"
        role="menu"
        aria-labelledby="dLabelTranslations">
      <li><a class="reference" href="http://odoo-connector.com/9.0">English</a><li>
      <li><a class="reference" href="http://odoo-connector.com/9.0/fr">French</a><li>
    </ul>
  </li>
  <li class="dropdown">
    <a role="button"
       id="dLabelVersions"
       data-toggle="dropdown"
       data-target="#"
       href="#">Version<b class="caret"></b></a>
    <ul class="dropdown-menu"
        role="menu"
        aria-labelledby="dLabeVersions">
      <li><a class="reference" href="http://odoo-connector.com/8.0">8.0</a><li>
      <li><a class="reference" href="http://odoo-connector.com/10.0">10.0</a><li>
      <li><a class="reference" href="http://odoo-connector.com/">11.0</a><li>
    </ul>
  </li>
  
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../project/contribute.html">Contribute</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../project/contribute.html#want-to-start-a-new-connector">Want to start a new connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/contribute.html#creating-or-maintaining-a-translation-of-this-doc">Creating or maintaining a translation of this doc</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../project/contributors.html">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project/contributors.html#financial-contributors">Financial Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project/license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project/changes.html">Changes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../project/changes.html#future">Future (?)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/changes.html#id2">9.0.1.0.2 (2016-03-03)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/changes.html#id3">9.0.1.0.1 (2016-03-03)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/changes.html#id4">8.0.3.3.0 (2016-02-29)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/changes.html#id5">3.2.0 (2015-09-10)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/changes.html#id6">3.1.0 (2015-05-15)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/changes.html#id7">3.0.0 (2015-04-01)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/changes.html#id8">2.2.0 (2014-05-26)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/changes.html#id9">2.1.1 (2014-02-06)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/changes.html#warning-breaks-compatibility">2.1.0 (2014-01-15 - warning: breaks compatibility)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/changes.html#id10">2.0.1 (2013-09-12)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/changes.html#id11">2.0.0</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../project/roadmap.html">Roadmap</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../guides/code_overview.html">Code Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../guides/code_overview.html#backends">Backends</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/code_overview.html#bindings">Bindings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/code_overview.html#session">Session</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/code_overview.html#events">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/code_overview.html#jobs">Jobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/code_overview.html#connectorunit">ConnectorUnit</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guides/concepts.html">Connector Concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../guides/concepts.html#events">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/concepts.html#jobs-queue">Jobs Queue</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/concepts.html#session">Session</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/concepts.html#backend">Backend</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/concepts.html#environment">Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/concepts.html#connectorunit">ConnectorUnit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/concepts.html#bindings">Bindings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/concepts.html#checkpoint">Checkpoint</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guides/bootstrap_connector.html">Boostrapping a connector</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../guides/bootstrap_connector.html#odoo-manifest">Odoo Manifest</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/bootstrap_connector.html#declare-the-backends">Declare the backends</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/bootstrap_connector.html#backend-model">Backend Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/bootstrap_connector.html#abstract-binding">Abstract Binding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/bootstrap_connector.html#environment">Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/bootstrap_connector.html#checkpoints">Checkpoints</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/bootstrap_connector.html#connectorunit-classes">ConnectorUnit classes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guides/jobrunner.html">Configuring the job runner and channels</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../guides/jobrunner.html#what-is-the-job-runner">What is the job runner?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/jobrunner.html#how-does-it-work">How does it work?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/jobrunner.html#how-to-use-it">How to use it?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/jobrunner.html#caveat">Caveat</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/jobrunner.html#what-is-a-channel">What is a channel?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/jobrunner.html#how-to-configure-channels">How to configure Channels?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guides/multiprocessing.html">Use the connector with multiprocessing workers</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="api_connector.html">Connector</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_session.html">Session</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Backend</a></li>
<li class="toctree-l1"><a class="reference internal" href="#module-connector.backend_model">Backend Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_event.html">Event</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_binder.html">Binder</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_mapper.html">Mapper</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api_mapper.html#mappers">Mappers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_synchronizer.html">Synchronizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_backend_adapter.html">Backend Adapter</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_queue.html">Queue</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api_queue.html#module-connector.queue.job">Job</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_queue.html#worker">Worker</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_queue.html#id5">Queue</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_queue.html#module-connector.queue.model">Models</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_exception.html">Exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_channels.html">Channels</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_runner.html">Job Runner</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api_runner.html#what-is-the-job-runner">What is the job runner?</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_runner.html#how-does-it-work">How does it work?</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_runner.html#how-to-use-it">How to use it?</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_runner.html#caveat">Caveat</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Backend</a></li>
<li><a class="reference internal" href="#module-connector.backend_model">Backend Models</a></li>
</ul>
</ul>
</li>
              
            

            
              
                
  <li>
    <a href="api_session.html" title="Previous Chapter: Session"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Session</span>
    </a>
  </li>
  <li>
    <a href="api_event.html" title="Next Chapter: Event"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Event &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="backend">
<h1>Backend<a class="headerlink" href="#backend" title="Permalink to this headline">¶</a></h1>
<p>A backend for a version (for instance Magento 1.7), is represented
by an instance of the <a class="reference internal" href="#connector.backend.Backend" title="connector.backend.Backend"><code class="xref py py-class docutils literal notranslate"><span class="pre">Backend</span></code></a> class.</p>
<p>Each connector will also create a <code class="docutils literal notranslate"><span class="pre">connector.backend</span></code> which allows the users
to register their backends. For instance, the Magento connector has
<code class="docutils literal notranslate"><span class="pre">magento.backend</span></code> (<code class="docutils literal notranslate"><span class="pre">_inherit</span></code>
<code class="xref py py-class docutils literal notranslate"><span class="pre">connector.backend_model.connector_backend</span></code>).  This model contains a
<code class="docutils literal notranslate"><span class="pre">version</span></code> field which should have the same list of versions (with the exact
same name) than the instances of <a class="reference internal" href="#connector.backend.Backend" title="connector.backend.Backend"><code class="xref py py-class docutils literal notranslate"><span class="pre">Backend</span></code></a>.</p>
<p>Example with the Magento Connector:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># in magentoerpconnect/backend.py</span>

<span class="n">magento</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">Backend</span><span class="p">(</span><span class="s1">&#39;magento&#39;</span><span class="p">)</span>
<span class="sd">&quot;&quot;&quot; Generic Magento Backend &quot;&quot;&quot;</span>

<span class="n">magento1700</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">Backend</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">magento</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s1">&#39;1.7&#39;</span><span class="p">)</span>
<span class="sd">&quot;&quot;&quot; Magento Backend for version 1.7 &quot;&quot;&quot;</span>

<span class="c1"># in magentoerpconnect/magento_model.py</span>

<span class="k">class</span> <span class="nc">MagentoBackend</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;magento.backend&#39;</span>
    <span class="n">_description</span> <span class="o">=</span> <span class="s1">&#39;Magento Backend&#39;</span>
    <span class="n">_inherit</span> <span class="o">=</span> <span class="s1">&#39;connector.backend&#39;</span>

    <span class="n">_backend_type</span> <span class="o">=</span> <span class="s1">&#39;magento&#39;</span>

    <span class="nd">@api</span><span class="o">.</span><span class="n">model</span>
    <span class="k">def</span> <span class="nf">_select_versions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Available versions</span>

<span class="sd">        Can be inherited to add custom versions.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[(</span><span class="s1">&#39;1.7&#39;</span><span class="p">,</span> <span class="s1">&#39;Magento 1.7&#39;</span><span class="p">)]</span>

    <span class="c1"># &lt;snip&gt;</span>

    <span class="n">version</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Selection</span><span class="p">(</span>
        <span class="n">selection</span><span class="o">=</span><span class="s1">&#39;_select_versions&#39;</span><span class="p">,</span>
        <span class="n">string</span><span class="o">=</span><span class="s1">&#39;Version&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">location</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s1">&#39;Location&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s1">&#39;Username&#39;</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s1">&#39;Password&#39;</span><span class="p">)</span>

    <span class="c1"># &lt;snip&gt;</span>
</pre></div>
</div>
<p>In the code above, ‘1.7’ is the matching key between the
<a class="reference internal" href="#connector.backend.Backend" title="connector.backend.Backend"><code class="xref py py-class docutils literal notranslate"><span class="pre">Backend</span></code></a> instance (<code class="docutils literal notranslate"><span class="pre">magento1700</span></code>) and the
<code class="docutils literal notranslate"><span class="pre">magento_backend</span></code> record.</p>
<span class="target" id="module-connector.backend"></span><dl class="class">
<dt id="connector.backend.Backend">
<em class="property">class </em><code class="descclassname">connector.backend.</code><code class="descname">Backend</code><span class="sig-paren">(</span><em>service=None</em>, <em>version=None</em>, <em>parent=None</em>, <em>registry=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/backend.html#Backend"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.backend.Backend" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A backend represents a system to interact with,
like Magento, Prestashop, Redmine, …</p>
<p>It owns 3 properties:</p>
<dl class="attribute">
<dt id="connector.backend.Backend.service">
<code class="descname">service</code><a class="headerlink" href="#connector.backend.Backend.service" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the service, for instance ‘magento’</p>
</dd></dl>

<dl class="attribute">
<dt id="connector.backend.Backend.version">
<code class="descname">version</code><a class="headerlink" href="#connector.backend.Backend.version" title="Permalink to this definition">¶</a></dt>
<dd><p>The version of the service. For instance: ‘1.7’</p>
</dd></dl>

<dl class="attribute">
<dt id="connector.backend.Backend.parent">
<code class="descname">parent</code><a class="headerlink" href="#connector.backend.Backend.parent" title="Permalink to this definition">¶</a></dt>
<dd><p>A parent backend.
When no <a class="reference internal" href="api_connector.html#connector.connector.ConnectorUnit" title="connector.connector.ConnectorUnit"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConnectorUnit</span></code></a>
is found for a backend, it will search it in the <cite>parent</cite>.</p>
</dd></dl>

<p>The Backends structure is a key part of the framework,
but is rather simple.</p>
<ul class="simple">
<li>A <code class="docutils literal notranslate"><span class="pre">Backend</span></code> instance holds a registry of
<a class="reference internal" href="api_connector.html#connector.connector.ConnectorUnit" title="connector.connector.ConnectorUnit"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConnectorUnit</span></code></a> classes</li>
<li>It can return the appropriate
<a class="reference internal" href="api_connector.html#connector.connector.ConnectorUnit" title="connector.connector.ConnectorUnit"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConnectorUnit</span></code></a> to use for a task</li>
<li>If no <a class="reference internal" href="api_connector.html#connector.connector.ConnectorUnit" title="connector.connector.ConnectorUnit"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConnectorUnit</span></code></a> is registered for a
task, it will ask it to its direct parent (and so on)</li>
</ul>
<p>The Backends support 2 different extension mechanisms. One is more
vertical - across the versions - and the other would be more horizontal as
it allows to modify the behavior for 1 version of backend.</p>
<p>For the sake of the example, let’s say we have theses backend versions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>         <span class="o">&lt;</span><span class="n">Magento</span><span class="o">&gt;</span>
             <span class="o">|</span>
      <span class="o">-----------------</span>
      <span class="o">|</span>               <span class="o">|</span>
<span class="o">&lt;</span><span class="n">Magento</span> <span class="mf">1.7</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="n">Magento</span> <span class="mf">2.0</span><span class="o">&gt;</span>
      <span class="o">|</span>
<span class="o">&lt;</span><span class="n">Magento</span> <span class="k">with</span> <span class="n">specific</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>And here is the way they are declared in Python:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">magento</span> <span class="o">=</span> <span class="n">Backend</span><span class="p">(</span><span class="s1">&#39;magento&#39;</span><span class="p">)</span>
<span class="n">magento1700</span> <span class="o">=</span> <span class="n">Backend</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">magento</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s1">&#39;1.7&#39;</span><span class="p">)</span>
<span class="n">magento2000</span> <span class="o">=</span> <span class="n">Backend</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">magento</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s1">&#39;2.0&#39;</span><span class="p">)</span>

<span class="n">magento_specific</span> <span class="o">=</span> <span class="n">Backend</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">magento1700</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s1">&#39;1.7-specific&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>In the graph above, <code class="docutils literal notranslate"><span class="pre">&lt;Magento&gt;</span></code> will hold all the classes shared between
all the versions.  Each Magento version (<code class="docutils literal notranslate"><span class="pre">&lt;Magento</span> <span class="pre">1.7&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;Magento</span>
<span class="pre">2.0&gt;</span></code>) will use the classes defined on <code class="docutils literal notranslate"><span class="pre">&lt;Magento&gt;</span></code>, excepted if they
registered their own ones instead. That’s the same for <code class="docutils literal notranslate"><span class="pre">&lt;Magento</span> <span class="pre">with</span>
<span class="pre">specific&gt;</span></code> but this one contains customizations which are specific to an
instance (typically you want specific mappings for one instance).</p>
<p>Here is how you would register classes on <code class="docutils literal notranslate"><span class="pre">&lt;Magento&gt;</span></code> and another on
<code class="docutils literal notranslate"><span class="pre">&lt;Magento</span> <span class="pre">1.7&gt;</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@magento</span>
<span class="k">class</span> <span class="nc">Synchronizer</span><span class="p">(</span><span class="n">ConnectorUnit</span><span class="p">):</span>
    <span class="n">_model_name</span> <span class="o">=</span> <span class="s1">&#39;res.partner&#39;</span>

<span class="nd">@magento</span>
<span class="k">class</span> <span class="nc">Mapper</span><span class="p">(</span><span class="n">ConnectorUnit</span><span class="p">):</span>
    <span class="n">_model_name</span> <span class="o">=</span> <span class="s1">&#39;res.partner&#39;</span>

<span class="nd">@magento1700</span>
<span class="k">class</span> <span class="nc">Synchronizer1700</span><span class="p">(</span><span class="n">Synchronizer</span><span class="p">):</span>
    <span class="n">_model_name</span> <span class="o">=</span> <span class="s1">&#39;res.partner&#39;</span>
</pre></div>
</div>
<p>Here, the <a class="reference internal" href="#connector.backend.Backend.get_class" title="connector.backend.Backend.get_class"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_class()</span></code></a> called on <code class="docutils literal notranslate"><span class="pre">magento1700</span></code> would return:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">magento1700</span><span class="o">.</span><span class="n">get_class</span><span class="p">(</span><span class="n">Synchronizer</span><span class="p">,</span> <span class="n">session</span><span class="p">,</span> <span class="s1">&#39;res.partner&#39;</span><span class="p">)</span>
<span class="c1"># =&gt; Synchronizer1700</span>
<span class="n">magento1700</span><span class="o">.</span><span class="n">get_class</span><span class="p">(</span><span class="n">Mapper</span><span class="p">,</span> <span class="n">session</span><span class="p">,</span> <span class="s1">&#39;res.partner&#39;</span><span class="p">)</span>
<span class="c1"># =&gt; Mapper</span>
</pre></div>
</div>
<p>This is the vertical extension mechanism, it says that each child version
is able to extend or replace the behavior of its parent.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">when using the framework, you won’t need to call
<a class="reference internal" href="#connector.backend.Backend.get_class" title="connector.backend.Backend.get_class"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_class()</span></code></a>, usually, you will call
<a class="reference internal" href="api_connector.html#connector.connector.ConnectorEnvironment.get_connector_unit" title="connector.connector.ConnectorEnvironment.get_connector_unit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">connector.connector.ConnectorEnvironment.get_connector_unit()</span></code></a>.</p>
</div>
<p>The vertical extension is the one you will probably use the most, because
most of the things you will change concern your custom adaptations or
different behaviors between the versions of the backend.</p>
<p>However, some time, we need to change the behavior of a connector, by
installing an addon. For example, say that we already have an
<code class="docutils literal notranslate"><span class="pre">ImportMapper</span></code> for the products in the Magento Connector. We create a
- generic - addon to handle the catalog in a more advanced manner. We
redefine an <code class="docutils literal notranslate"><span class="pre">AdvancedImportMapper</span></code>, which should be used when the
addon is installed. This is the horizontal extension mechanism.</p>
<p>Replace a <a class="reference internal" href="api_connector.html#connector.connector.ConnectorUnit" title="connector.connector.ConnectorUnit"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConnectorUnit</span></code></a> by another one
in a backend:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@backend</span><span class="p">(</span><span class="n">replacing</span><span class="o">=</span><span class="n">ImportMapper</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">AdvancedImportMapper</span><span class="p">(</span><span class="n">ImportMapper</span><span class="p">):</span>
    <span class="n">_model_name</span> <span class="o">=</span> <span class="s1">&#39;product.product&#39;</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The horizontal extension should be used sparingly and
cautiously since as soon as 2 addons want to replace
the same class, you’ll have a conflict
(which would need to create a third addon to glue
them, <code class="docutils literal notranslate"><span class="pre">replacing</span></code> can take a tuple of classes to replace
and this is exponential).
This mechanism should be used only in some well placed
circumstances for generic addons.</p>
</div>
<dl class="method">
<dt id="connector.backend.Backend.get_class">
<code class="descname">get_class</code><span class="sig-paren">(</span><em>base_class</em>, <em>session</em>, <em>model_name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/backend.html#Backend.get_class"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.backend.Backend.get_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Find a matching subclass of <code class="docutils literal notranslate"><span class="pre">base_class</span></code> in the registered
classes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>base_class</strong> (<a class="reference internal" href="api_connector.html#connector.connector.MetaConnectorUnit" title="connector.connector.MetaConnectorUnit"><code class="xref py py-class docutils literal notranslate"><span class="pre">connector.connector.MetaConnectorUnit</span></code></a>) – class (and its subclass) to search in the registry</li>
<li><strong>session</strong> (<a class="reference internal" href="api_session.html#connector.session.ConnectorSession" title="connector.session.ConnectorSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">connector.session.ConnectorSession</span></code></a>) – current session</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="connector.backend.Backend.match">
<code class="descname">match</code><span class="sig-paren">(</span><em>service</em>, <em>version</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/backend.html#Backend.match"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.backend.Backend.match" title="Permalink to this definition">¶</a></dt>
<dd><p>Used to find the backend for a service and a version</p>
</dd></dl>

<dl class="method">
<dt id="connector.backend.Backend.register_class">
<code class="descname">register_class</code><span class="sig-paren">(</span><em>cls</em>, <em>replacing=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/connector/backend.html#Backend.register_class"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#connector.backend.Backend.register_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a class in the backend.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cls</strong> (<a class="reference internal" href="api_connector.html#connector.connector.MetaConnectorUnit" title="connector.connector.MetaConnectorUnit"><code class="xref py py-class docutils literal notranslate"><span class="pre">connector.connector.MetaConnectorUnit</span></code></a>) – the ConnectorUnit class class to register</li>
<li><strong>replacing</strong> (<a class="reference internal" href="api_connector.html#connector.connector.MetaConnectorUnit" title="connector.connector.MetaConnectorUnit"><code class="xref py py-class docutils literal notranslate"><span class="pre">connector.connector.MetaConnectorUnit</span></code></a>) – optional, the ConnectorUnit class to replace</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">service</code></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-connector.backend_model">
<span id="backend-models"></span><h1>Backend Models<a class="headerlink" href="#module-connector.backend_model" title="Permalink to this headline">¶</a></h1>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../_sources/api/api_backend.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2013, Camptocamp SA.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.<br/>
    </p>
  </div>
</footer>
  </body>
</html>